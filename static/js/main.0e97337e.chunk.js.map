{"version":3,"sources":["components/discover/songCard.js","components/discover/songGrid.js","config/fbConfig.js","store/actions/authActions.js","components/discover/tokenHandler.js","components/discover/cancellablePromise.js","components/discover/discover.js","components/layout/login/signup.js","components/layout/login/signin.js","components/layout/login/loginForm.js","components/layout/login/login.js","components/feed/postSummary.js","components/feed/postList.js","components/feed/feed.js","components/createPost.js","store/actions/postActions.js","components/profile/friendList.js","components/profile/modalUploadPicture.js","components/profile/profile.js","components/profile/pendingList.js","components/layout/sideNavbar.js","components/404.js","App.js","serviceWorker.js","store/reducers/authReducer.js","store/reducers/postReducer.js","store/reducers/rootReducer.js","index.js"],"names":["SongCard","state","isOpen","handleOpen","setState","timeout","setTimeout","handleClose","clearTimeout","makePost","props","title","url","history","push","pathname","this","_token","uri","deviceid","type","account_type","fetch","method","headers","authorization","query","body","JSON","stringify","uris","context_uri","window","open","artist","album","art_url","player_connected","listen_button","Button","fluid","positive","onClick","playSong","Popup","trigger","basic","color","content","on","onClose","onOpen","position","Card","centered","raised","Content","floated","icon","Header","Meta","Image","src","extra","Component","SongGrid","song_info","Array","isArray","song_cards","map","info","index","Grid","Column","stretched","key","rows","Math","ceil","length","fill","currValue","Row","slice","columns","SongInfo","firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","acceptFriend","friend_user_id","logged_in_user_id","dispatch","getState","getFirebase","firestore","getFirestore","collection","doc","update","friends_pending","FieldValue","arrayRemove","friends","arrayUnion","then","catch","err","TokenHandler","token","getHashParams","access_token","error","URLSearchParams","location","search","get","e","hashParams","r","q","hash","substring","exec","decodeURIComponent","handleToken","auth","isEmpty","updateToken","uid","className","as","textAlign","Divider","hidden","Icon","name","Loader","active","size","connect","uId","callback","spotify_token","makeCancellable","promise","isCancelled","Promise","resolve","reject","val","cancel","spotifyApi","SpotifyWebApi","spotifyUrl","encodeURIComponent","join","Discover","handleSearchChange","value","results","searchButton","searchTracks","searchedTracks","tracks","items","searchArtists","searchedArtists","artists","searchAlbums","searchedAlbums","albums","searchPlaylists","searchedPlaylists","playlists","onPrevClick","player","previousTrack","onPlayClick","togglePlay","onNextClick","nextTrack","createPost","trackName","trackUrl","loggedIn","newReleases","recentlyPlayed","topTracks","deviceId","undefined","artistName","albumName","playing","duration","albumArt","accountTypePromise","newReleasesPromise","recentSongsPromise","topTracksPromise","searchTracksPromise","searchArtistsPromise","searchAlbumsPromise","searchPlaylistsPromise","initializeOnceMounted","route","disconnect","clearInterval","getToken","getAccessToken","setAccessToken","getAccountType","getNewReleases","getRecentSongs","getTopTracks","playerCheckInterval","listen","onRouteChange","bind","setInterval","initialize","promises","i","accountType","getMe","data","product","console","log","status","confirm","href","limit","offset","country","recentSongs","getMyRecentlyPlayedTracks","getMyTopTracks","keyword","Spotify","Player","getOAuthToken","cb","createEventHandlers","checkForPlayer","onStateChanged","a","device_id","transferPlaybackHere","track_window","currentTrack","current_track","id","paused","images","searchResults","newAlbums","recents","top","min","owner","display_name","external_urls","spotify","track","Menu","Item","inverted","checkForPlayer_driver","Search","showNoResults","onSearchChange","_","debounce","placeholder","Group","labeled","secondary","style","whiteSpace","charAt","toUpperCase","align","fontSize","expand","expandSection","nextProps","prevState","profile","isLoaded","SongSection","Container","SignUp","email","password","submit","signUp","change","target","authError","Form","onSubmit","Field","Input","label","onChange","control","ButtonContent","newUser","createUserWithEmailAndPassword","resp","user","set","privacy","imageUrl","SignIn","signIn","creds","credentials","signInWithEmailAndPassword","LoginForm","signing_up","sign_up","word","signing_area","Or","Segment","Login","to","padded","GridRow","PostSummary","post","users","filter","authorId","summary","author","song","rating","Event","image","date","moment","createdAt","toDate","format","extraText","comment","PostList","posts","Feed","friendsPosts","explorePosts","feedPanes","menuItem","render","Tab","Pane","panes","newPosts","Object","assign","compose","currentFriendsList","ordered","sortedFriendsArray","sort","b","publicPosts","sortedExploreArray","firestoreConnect","storeAs","where","CreatePost","handleChange","handleRating","handleSubmit","preventDefault","toggle","songInfo","text","widths","required","readOnly","disabled","Radio","defaultChecked","Dropdown","inline","options","TextArea","Post","add","Date","FriendList","friend","friend_info","fitted","ModalUploadPicture","isUploading","progress","imageURL","handleUploadStart","handleProgress","handleUploadError","handleUploadSuccess","filename","storage","ref","child","getDownloadURL","updateImage","handleModalClose","previousImageUrl","Modal","circular","bordered","closeOnDimmerClick","closeOnDocumentClick","divided","wrapped","width","accept","storageRef","onUploadStart","onUploadError","onUploadSuccess","onProgress","Progress","percent","success","Actions","Profile","posts_content","friends_content","navigate","destination","handleSubmitPrivacy","updateProfile","togglePrivacy","new_privacy","match","curProfilePosts","curProfileUser","params","isUser","friendButton","addFriend","includes","removeFriend","profile_panes","labelPosition","Label","compact","GridColumn","isLoading","curPrivatePosts","curPublicPosts","concat","profile_user_id","newInfo","PendingList","rejectFriend","friend_requests","user_info","List","animated","relaxed","verticalAlign","avatar","Description","SideNavbar","LOGIN","PROFILE","DISCOVER","FEED","REQUESTS","redirect_target","targets","visible","load","logo","alt","imageTop","imageBot","requests_num","requests","output","fixed","header","Sidebar","Pushable","animation","direction","vertical","onHide","signOut","Pusher","dimmed","to_link","NotFound","App","exact","path","component","showLogin","basename","Boolean","hostname","initState","authReducer","action","message","postReducer","rootReducer","combineReducers","firestoreReducer","firebaseReducer","store","createStore","applyMiddleware","thunk","withExtraArgument","reduxFirestore","rrfProps","config","useFirestoreForProfile","userProfile","attachAuthIsReady","createFirestoreInstance","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.0e97337e.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport { Card, Button, Image, Popup } from 'semantic-ui-react'\r\n\r\n\r\nconst timeoutLength = 1500\r\n\r\nclass SongCard extends Component {\r\n\r\n    state = { isOpen: false }\r\n\r\n    handleOpen = () => {\r\n        this.setState({ isOpen: true })\r\n\r\n        this.timeout = setTimeout(() => {\r\n        this.setState({ isOpen: false })\r\n        }, timeoutLength)\r\n    }\r\n\r\n    handleClose = () => {\r\n        this.setState({ isOpen: false })\r\n        clearTimeout(this.timeout)\r\n    }\r\n\r\n    playSong(){\r\n        let { _token, url, uri, deviceid, type, account_type } = this.props;\r\n\r\n        if (account_type === 'premium') {          \r\n            if(type === \"track\"){\r\n                fetch(\"https://api.spotify.com/v1/me/player/play\", {\r\n                method: \"PUT\",\r\n                headers: {\r\n                    authorization: `Bearer ${_token}`,\r\n                },\r\n                query:{\r\n                    \"device_id\":deviceid\r\n                },\r\n                body: JSON.stringify({\r\n                    uris:[uri]\r\n                }),\r\n            });\r\n            }\r\n            if(type === \"album\" || type === \"artist\" || type === \"playlist\"){\r\n                fetch(\"https://api.spotify.com/v1/me/player/play\", {\r\n                method: \"PUT\",\r\n                headers: {\r\n                    authorization: `Bearer ${_token}`,\r\n                },\r\n                query:{\r\n                    \"device_id\":deviceid\r\n                },\r\n                body: JSON.stringify({\r\n                    context_uri:uri\r\n                }),\r\n            });\r\n            }\r\n        } else if (account_type === 'free') {\r\n            window.open(url, '_blank noreferrer noopener')\r\n        }        \r\n    }\r\n\r\n    makePost = () => {\r\n        let { title, url } = this.props;\r\n        this.props.history.push({\r\n            pathname: '/createpost',\r\n            state: {title: title, url: url}\r\n        })\r\n    }\r\n\r\n    render() {\r\n        let { title, artist, album, art_url, type, account_type, player_connected } = this.props;\r\n\r\n        const listen_button = (account_type === 'premium' && !player_connected) ? \r\n            <Popup\r\n            trigger={<Button fluid basic color='green'>Listen!</Button>}\r\n            content={'Please launch Web Player first!'}\r\n            on='click'\r\n            open={this.state.isOpen}\r\n            onClose={this.handleClose}\r\n            onOpen={this.handleOpen}\r\n            position='bottom center'\r\n            /> :\r\n            <Button fluid positive onClick={() => this.playSong()}>Listen!</Button>\r\n\r\n        return (\r\n            <Card centered raised>\r\n                <Card.Content>\r\n                    {type === 'track' ? <Popup content='Create a post' position='top center' trigger={<Button floated='right' icon='plus' onClick={this.makePost}/>}/> : null}\r\n                    <Card.Header>{title}</Card.Header>\r\n                    <Card.Meta>{album + ' - ' + artist}</Card.Meta>\r\n                    <Image src={art_url}/>\r\n                </Card.Content>\r\n                <Card.Content extra>\r\n                    {listen_button}\r\n                </Card.Content>\r\n            </Card>\r\n        )\r\n    }\r\n}\r\n\r\nexport default SongCard;","import React, { Component } from 'react'\r\nimport { Grid } from 'semantic-ui-react'\r\nimport SongCard from './songCard'\r\n\r\nclass SongGrid extends Component {\r\n\r\n    render() {\r\n        const { song_info } = this.props\r\n\r\n        if (!Array.isArray(song_info)) {\r\n            return null;\r\n        }\r\n        else {            \r\n            const song_cards = song_info.map((info, index) => <Grid.Column stretched key={index}><SongCard title={info.title} artist={info.artist} album={info.album} art_url={info.art_url}\r\n                 url={info.url}_token={info._token} uri={info.uri} deviceid={info.deviceid} type={info.type} account_type={info.account_type} player_connected={info.player_connected} \r\n                 history={info.history} /></Grid.Column>)\r\n            const rows = Array(Math.ceil(song_info.length / 5)).fill().map((currValue, index) => <Grid.Row key={index}>{song_cards.slice(index*5, index*5 + 5)}</Grid.Row>)\r\n            return (\r\n                <Grid columns='equal'>\r\n                    {rows}\r\n                </Grid>\r\n            )\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport class SongInfo {\r\n    title;\r\n    artist;\r\n    album;\r\n    art_url;\r\n    url;\r\n    _token;\r\n    uri;\r\n    deviceid;\r\n    type;\r\n    account_type;\r\n    player_connected;\r\n    history;\r\n\r\n    constructor(title, artist, album, art_url, url, _token, uri, deviceid, type, account_type, player_connected, history) {\r\n        this.title = title\r\n        this.artist = artist\r\n        this.album = album\r\n        this.art_url = art_url\r\n        this.url = url\r\n        this._token = _token\r\n        this.uri = uri\r\n        this.deviceid = deviceid\r\n        this.type = type\r\n        this.account_type = account_type\r\n        this.player_connected = player_connected\r\n        this.history = history\r\n    }\r\n}\r\n\r\nexport default SongGrid;","import firebase from 'firebase/app'\r\nimport 'firebase/firestore'\r\nimport 'firebase/auth'\r\n\r\n// Your web app's Firebase configuration\r\nvar firebaseConfig = {\r\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\r\n  databaseURL: process.env.REACT_APP_DATABASE_URL,\r\n  projectId: process.env.REACT_APP_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\r\n  appId: process.env.REACT_APP_APP_ID\r\n}\r\n\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\n\r\nexport default firebase","import firebase from '../../config/fbConfig'\r\n\r\n\r\nexport const signIn = (credentials) => {\r\n  return (dispatch, getState) => {\r\n\r\n    // Make async call to database\r\n    firebase.auth().signInWithEmailAndPassword(\r\n      credentials.email,\r\n      credentials.password\r\n    ).then(() => {\r\n        dispatch({type: 'LOGIN_SUCCESS'})\r\n    }).catch((err) => {\r\n        dispatch({type: 'LOGIN_ERROR', err})\r\n    })\r\n  }\r\n}\r\n\r\n\r\nexport const signUp = (newUser) => {\r\n  return (dispatch, getState, {getFirestore}) => {\r\n\r\n    const firestore = getFirestore()\r\n\r\n    firebase.auth().createUserWithEmailAndPassword(\r\n      newUser.email,\r\n      newUser.password\r\n    ).then((resp) => {\r\n      firestore.collection('users').doc(resp.user.uid).set({\r\n        name: newUser.name,\r\n        friends: [],\r\n        friends_pending: [],\r\n        privacy: 'public',\r\n        spotify_token: '',\r\n        imageUrl: 'https://firebasestorage.googleapis.com/v0/b/mutterv2.appspot.com/o/default.png?alt=media&token=3eace69d-a34a-4721-b55c-0d6d8fd25f2a'\r\n      })\r\n    }).then(() => {\r\n      dispatch({ type: 'SIGNUP_SUCCESS' })\r\n    }).catch(err => {\r\n      dispatch({ type: 'SIGNUP_ERROR', err})\r\n    })\r\n  }\r\n}\r\n\r\n\r\nexport const signOut = () => {\r\n  return (dispatch, getState) => {\r\n    firebase.auth().signOut().then(() => {\r\n      dispatch({type: 'SIGNOUT_SUCCESS'})\r\n    })\r\n  }\r\n}\r\n\r\n\r\nexport const updateImage = (uId, imageUrl) => {\r\n  return (dispatch, getState, { getFirebase, getFirestore }) => {\r\n\r\n    // Make async call to database\r\n    const firestore = getFirestore()\r\n\r\n    firestore.collection('users').doc(uId).update({\r\n      imageUrl: imageUrl\r\n    }).then(() => {\r\n      dispatch({ type: 'USER_IMAGE', uId, imageUrl })\r\n    }).catch((err) => {\r\n      dispatch({ type: 'USER_IMAGE_ERROR', err })\r\n    })\r\n  }\r\n}\r\n\r\n\r\nexport const updateProfile = (uId, newInfo) => {\r\n  return (dispatch, getState, { getFirebase, getFirestore }) => {\r\n\r\n    // Make async call to database\r\n    const firestore = getFirestore()\r\n    const {name, privacy} = newInfo\r\n\r\n    firestore.collection('users').doc(uId).update({\r\n      name: name,\r\n      privacy: privacy\r\n    }).then(() => {\r\n      dispatch({ type: 'USER_UPDATE', uId, newInfo })\r\n    }).catch((err) => {\r\n      dispatch({ type: 'USER_UPDATE_ERROR', err })\r\n    })\r\n  }\r\n}\r\n\r\n\r\nexport const addFriend = (profile_user_id, logged_in_user_id) => {\r\n  return (dispatch, getState, { getFirebase, getFirestore }) => {\r\n\r\n    // Make async call to database\r\n    const firestore = getFirestore()\r\n\r\n    firestore.collection('users').doc(profile_user_id).update({\r\n      friends_pending: firestore.FieldValue.arrayUnion(logged_in_user_id)\r\n    }).then(() => {\r\n      dispatch({ type: 'SEND_FRIEND_REQUEST', profile_user_id, logged_in_user_id})\r\n    }).catch((err) => {\r\n      dispatch({ type: 'SEND_FRIEND_REQUEST_ERROR', err })\r\n    })\r\n  }\r\n}\r\n\r\n\r\nexport const removeFriend = (profile_user_id, logged_in_user_id) => {\r\n  return (dispatch, getState, { getFirebase, getFirestore }) => {\r\n\r\n    // Make async call to database\r\n    const firestore = getFirestore()\r\n\r\n    // Remove logged in user from profile user's friends list\r\n    firestore.collection('users').doc(profile_user_id).update({\r\n      friends: firestore.FieldValue.arrayRemove(logged_in_user_id)\r\n    })\r\n    \r\n    // Remove profile user from logged in user's friends list\r\n    firestore.collection('users').doc(logged_in_user_id).update({\r\n      friends: firestore.FieldValue.arrayRemove(profile_user_id)\r\n    }).then(() => {\r\n      dispatch({ type: 'REMOVE_FRIEND', profile_user_id, logged_in_user_id})\r\n    }).catch((err) => {\r\n      dispatch({ type: 'REMOVE_FRIEND_ERROR', err })\r\n    })\r\n  }\r\n}\r\n\r\n\r\nexport const acceptFriend = (friend_user_id, logged_in_user_id) => {\r\n  return (dispatch, getState, { getFirebase, getFirestore }) => {\r\n\r\n    // Make async call to database\r\n    const firestore = getFirestore()\r\n\r\n    // Remove incoming friend from logged in user's friends_pending list\r\n    firestore.collection('users').doc(logged_in_user_id).update({\r\n      friends_pending: firestore.FieldValue.arrayRemove(friend_user_id)\r\n    })\r\n    \r\n    // Add incoming friend to logged in user's friends list\r\n    firestore.collection('users').doc(logged_in_user_id).update({\r\n      friends: firestore.FieldValue.arrayUnion(friend_user_id)\r\n    })\r\n\r\n    // Add logged in user to incoming friend's friends list\r\n    firestore.collection('users').doc(friend_user_id).update({\r\n      friends: firestore.FieldValue.arrayUnion(logged_in_user_id)\r\n    }).then(() => {\r\n      dispatch({ type: 'ACCEPT_FRIEND', friend_user_id, logged_in_user_id})\r\n    }).catch((err) => {\r\n      dispatch({ type: 'ACCEPT_FRIEND_ERROR', err })\r\n    })\r\n  }\r\n}\r\n\r\n\r\nexport const rejectFriend = (friend_user_id, logged_in_user_id) => {\r\n  return (dispatch, getState, { getFirebase, getFirestore }) => {\r\n\r\n    // Make async call to database\r\n    const firestore = getFirestore()\r\n\r\n    // Remove incoming friend from logged in user's friends_pending list\r\n    firestore.collection('users').doc(logged_in_user_id).update({\r\n      friends_pending: firestore.FieldValue.arrayRemove(friend_user_id)\r\n    }).then(() => {\r\n      dispatch({ type: 'REJECT_FRIEND', friend_user_id, logged_in_user_id})\r\n    }).catch((err) => {\r\n      dispatch({ type: 'REJECT_FRIEND_ERROR', err })\r\n    })\r\n  }\r\n}\r\n\r\nexport const updateToken = (uId, token, callback) => {\r\n  return (dispatch, getState, { getFirebase, getFirestore }) => {\r\n\r\n    // Make async call to database\r\n    const firestore = getFirestore()\r\n\r\n    firestore.collection('users').doc(uId).update({\r\n      spotify_token: token\r\n    }).then(() => {\r\n      dispatch({ type: 'SPOTIFY_TOKEN', uId })\r\n    }).catch((err) => {\r\n      dispatch({ type: 'SPOTIFY_TOKEN_ERROR', err })\r\n    })\r\n\r\n    callback();\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Loader, Header, Icon, Divider } from 'semantic-ui-react'\r\nimport { updateToken } from '../../store/actions/authActions'\r\n\r\n\r\nexport class TokenHandler extends Component {\r\n\r\n  constructor(){\r\n    super();\r\n\r\n    const params = this.getHashParams();\r\n    const token = params.access_token;\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const error = urlParams.get('error')\r\n    this.state = {\r\n      token: token ? token : '',\r\n      error: error ? error : ''\r\n    }\r\n  }\r\n\r\n  getHashParams() {\r\n    let hashParams = {};\r\n    let e, r = /([^&;=]+)=?([^&;]*)/g,\r\n        q = window.location.hash.substring(1);\r\n    e = r.exec(q)\r\n    while (e) {\r\n       hashParams[e[1]] = decodeURIComponent(e[2]);\r\n       e = r.exec(q);\r\n    }\r\n    return hashParams;\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (!this.state.error)\r\n      this.handleToken()\r\n  }\r\n\r\n  handleToken() {\r\n    if (this.props.auth && !this.props.auth.isEmpty && this.state.token !== '') {\r\n      this.props.updateToken(this.props.auth.uid, this.state.token, () => \r\n        this.props.history.push(\"/discover\")\r\n      )\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className='fullsize_div'>\r\n        { this.state.error ? \r\n          <Header as='h2' icon textAlign='center'>\r\n            <Divider hidden />\r\n            <Divider hidden />\r\n            <Divider hidden />\r\n            <Icon name='exclamation triangle' />\r\n            An access error occured\r\n          </Header>\r\n          :\r\n          <Loader active size='massive'>Redirecting...</Loader>\r\n        }\r\n         \r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    auth: state.firebase.auth\r\n  }\r\n}\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    updateToken: (uId, token, callback) => dispatch(updateToken(uId, token, callback))\r\n  }\r\n}\r\n\r\n\r\nexport function redirectUrlToSpotifyForLogin() {\r\n\tconst CLIENT_ID = process.env.REACT_APP_SPOTIFY_CLIENT_ID\r\n  const REDIRECT_URI = \r\n    process.env.NODE_ENV === \"production\"\r\n    ? 'https://princes25.github.io/Mutter/tokenHandler'\r\n    : 'http://localhost:3000/tokenHandler';\r\n\r\n\tconst scopes = [\r\n    'user-read-private',\r\n    'user-read-email',\r\n    'user-read-playback-state',\r\n    'app-remote-control',\r\n    'user-read-recently-played',\r\n    'user-top-read',\r\n    'user-modify-playback-state',\r\n    'user-read-currently-playing',\r\n    'streaming'\r\n  ];\r\n  \r\n\treturn (\r\n\t\t\"https://accounts.spotify.com/authorize?client_id=\" +\r\n\t\tCLIENT_ID +\r\n\t\t\"&redirect_uri=\" +\r\n\t\tencodeURIComponent(REDIRECT_URI) +\r\n\t\t\"&scope=\" +\r\n\t\tencodeURIComponent(scopes.join(\" \")) +\r\n    \"&response_type=token\"\r\n\t);\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(TokenHandler)\r\n","// Based on solution found here: https://github.com/facebook/react/issues/5465#issuecomment-157888325\r\n\r\nexport const makeCancellable = (promise) => {\r\n    let isCancelled = false\r\n\r\n    const wrappedPromise = new Promise((resolve, reject) => {\r\n        promise.then( (val) => {\r\n            isCancelled ? reject({isCancelled: true}) : resolve(val)\r\n        });\r\n\r\n        promise.catch( (error) => {\r\n            isCancelled ? reject({isCancelled: true}) : reject(error)\r\n        })\r\n    })\r\n    \r\n    return {\r\n        promise: wrappedPromise,\r\n        cancel() {\r\n            isCancelled = true\r\n        },\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Container, Grid, Search, Header, Divider, Button, Menu, Image, Popup, Card } from 'semantic-ui-react'\r\nimport SongGrid, { SongInfo } from './songGrid'\r\nimport { redirectUrlToSpotifyForLogin } from './tokenHandler.js'\r\nimport SpotifyWebApi from 'spotify-web-api-js';\r\nimport { makeCancellable } from './cancellablePromise';\r\nimport _ from 'lodash'\r\n\r\nconst spotifyApi = new SpotifyWebApi();\r\nconst spotifyUrl = redirectUrlToSpotifyForLogin()\r\nconst base_url = \r\n  process.env.NODE_ENV === \"production\"\r\n  ? 'https://princes25.github.io/Mutter'\r\n  : 'http://localhost:3000';\r\n\r\n  \r\nexport class Discover extends Component {\r\n  constructor(){\r\n    super();\r\n\r\n    this.state = {\r\n      loggedIn: false,\r\n      searchButton: 'songs',\r\n      searchedTracks: [],\r\n      searchedArtists: [],\r\n      searchedAlbums: [],\r\n      searchedPlaylists: [],\r\n      value: '',\r\n      results: [],\r\n      newReleases: [],\r\n      recentlyPlayed: [],\r\n      topTracks: [],\r\n      _token: '',\r\n      deviceId: \"\",\r\n      error: \"\",\r\n      trackName: undefined,\r\n      trackUrl: undefined,\r\n      artistName: undefined,\r\n      albumName: undefined,\r\n      playing: false,\r\n      position: 0,\r\n      duration: 1,\r\n      albumArt: \"\",\r\n      player_connected: false,\r\n      account_type: 'Not Logged In. Click to authenticate!',\r\n      accountTypePromise: null,\r\n      newReleasesPromise: null,\r\n      recentSongsPromise: null,\r\n      topTracksPromise: null,\r\n      searchTracksPromise: null,\r\n      searchArtistsPromise: null,\r\n      searchAlbumsPromise: null,\r\n      searchPlaylistsPromise: null,\r\n      initializeOnceMounted: undefined\r\n    }\r\n  }\r\n  \r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    if (nextProps.profile.isLoaded && nextProps.profile.spotify_token && prevState._token !== nextProps.profile.spotify_token) {\r\n      return { _token: nextProps.profile.spotify_token, loggedIn: true }\r\n    }\r\n    else {\r\n      return null\r\n    }\r\n  }\r\n\r\n  onRouteChange(route) {\r\n    if(this.state.player_connected){\r\n      this.player.disconnect();\r\n    }\r\n  }\r\n  \r\n  initialize() {\r\n    if (this.state.loggedIn) {\r\n      clearInterval(this.initializeOnceMounted)\r\n      const token = this.state._token;\r\n      const getToken = spotifyApi.getAccessToken();\r\n      if (token) {\r\n        spotifyApi.setAccessToken(token);\r\n      }\r\n      else if(getToken){\r\n        spotifyApi.setAccessToken(getToken);\r\n      }\r\n      this.getAccountType();\r\n      this.getNewReleases()\r\n      this.getRecentSongs();\r\n      this.getTopTracks();\r\n      this.playerCheckInterval = null;\r\n      this.props.history.listen(this.onRouteChange.bind(this));\r\n    } \r\n  }\r\n\r\n  componentDidMount() {\r\n    this.initializeOnceMounted = setInterval(() => this.initialize(), 20)\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const {accountTypePromise, newReleasesPromise, recentSongsPromise, topTracksPromise, searchTracksPromise, searchArtistsPromise, searchAlbumsPromise, searchPlaylistsPromise} = this.state\r\n    const promises = [accountTypePromise, newReleasesPromise, recentSongsPromise, topTracksPromise, searchTracksPromise, searchArtistsPromise, searchAlbumsPromise, searchPlaylistsPromise]\r\n    for (let i = 0; i < promises.length; i++) {\r\n      if (promises[i]) {\r\n        promises[i].cancel()\r\n      }\r\n    }\r\n    if (this.initializeOnceMounted !== undefined)\r\n      clearInterval(this.initializeOnceMounted)\r\n  }\r\n\r\n  getAccountType(){\r\n    let accountType = makeCancellable(spotifyApi.getMe())\r\n    \r\n    this.setState({accountTypePromise: accountType}, () => {\r\n      accountType.promise.then((data) => {\r\n        const product = data.product === 'premium' ? 'premium' : 'free' // Since it may return 'open', which is also free\r\n        this.setState({account_type: product});\r\n        return data;\r\n      }, function(err) {\r\n        console.log(\"Something went wrong!\", err);\r\n        if (err.status === 401)\r\n          if (window.confirm(\"Token Expired! Please re-login to Spotify!\")) \r\n            window.location.href = spotifyUrl;\r\n      })\r\n    })\r\n  }\r\n\r\n  getNewReleases(){\r\n    let newReleases = makeCancellable(spotifyApi.getNewReleases({ limit : 5, offset: 0, country: 'US' }))\r\n    this.setState({newReleasesPromise: newReleases}, () => {\r\n      newReleases.promise.then((data) => {\r\n        this.setState({newReleases: data.albums.items});\r\n        return data;\r\n      }, function(err) {\r\n        console.log(\"Something went wrong!\", err);\r\n      })\r\n    })\r\n  }\r\n  \r\n  getRecentSongs(){\r\n    let recentSongs = makeCancellable(spotifyApi.getMyRecentlyPlayedTracks({ limit: 5 }))\r\n    this.setState({recentSongsPromise: recentSongs}, () => {\r\n      recentSongs.promise.then((data) => {\r\n        this.setState({\r\n          recentlyPlayed: data.items\r\n        });\r\n        return data;\r\n      }, function(err) {\r\n        console.log(\"Something went wrong!\", err);\r\n      })\r\n    })\r\n  }\r\n\r\n  getTopTracks(){\r\n    let topTracks = makeCancellable(spotifyApi.getMyTopTracks({ limit: 5 }))\r\n    this.setState({topTracksPromise: topTracks}, () => {\r\n      topTracks.promise.then((data) => {\r\n        this.setState({\r\n          topTracks: data.items\r\n        });\r\n        return data;\r\n      }, function(err) {\r\n        console.log(\"Something went wrong!\", err);\r\n      })\r\n    })\r\n  }\r\n\r\n  searchTracks(keyword){\r\n    let tracks = makeCancellable(spotifyApi.searchTracks(keyword))\r\n    this.setState({searchTracksPromise: tracks})\r\n\r\n    tracks.promise.then((data) => {\r\n      this.setState({searchedTracks: data});\r\n      return data;\r\n    }, function(err) {\r\n      console.error(err);\r\n    });\r\n  }\r\n\r\n  searchAlbums(keyword){\r\n    let albums = makeCancellable(spotifyApi.searchAlbums(keyword))\r\n    this.setState({searchAlbumsPromise: albums})\r\n\r\n    albums.promise.then((data) => {\r\n      this.setState({searchedAlbums: data});\r\n      return data;\r\n    }, function(err) {\r\n      console.error(err);\r\n    });\r\n  }\r\n\r\n  searchArtists(keyword){\r\n    let artists = makeCancellable(spotifyApi.searchArtists(keyword))\r\n    this.setState({searchArtistsPromise: artists})\r\n\r\n    artists.promise.then((data) => {\r\n      this.setState({searchedArtists: data});\r\n      return data;\r\n    }, function(err) {\r\n      console.error(err);\r\n    });\r\n  }\r\n\r\n  searchPlaylists(keyword){\r\n    let playlists = makeCancellable(spotifyApi.searchPlaylists(keyword))\r\n    this.setState({searchPlaylistsPromise: playlists})\r\n    \r\n    playlists.promise.then((data) => {\r\n      this.setState({searchedPlaylists: data});\r\n      return data;\r\n    }, function(err) {\r\n      console.error(err);\r\n    });\r\n  }\r\n\r\n  handleSearchChange = (e, { value }) => {\r\n    this.setState({ value })\r\n\r\n    setTimeout(() => {\r\n      if (this.state.value.length < 1) return this.setState({value: '', results: []})\r\n\r\n      switch(this.state.searchButton) {\r\n        case 'songs':\r\n          this.searchTracks(value)\r\n          this.setState({\r\n            results: (this.state.searchedTracks !== [] && this.state.searchedTracks.tracks && this.state.searchedTracks.tracks.items) ? this.state.searchedTracks.tracks.items : []\r\n          })\r\n          break;\r\n\r\n        case 'artists':\r\n          this.searchArtists(value)\r\n          this.setState({\r\n            results: (this.state.searchedArtists !== [] && this.state.searchedArtists.artists && this.state.searchedArtists.artists.items) ? this.state.searchedArtists.artists.items : []\r\n          })\r\n          break;\r\n          \r\n        case 'albums':\r\n          this.searchAlbums(value)\r\n          this.setState({\r\n            results: (this.state.searchedAlbums !== [] && this.state.searchedAlbums.albums && this.state.searchedAlbums.albums.items) ? this.state.searchedAlbums.albums.items : []\r\n          })\r\n          break;\r\n\r\n        case 'playlists':\r\n          this.searchPlaylists(value)\r\n          this.setState({\r\n            results: (this.state.searchedPlaylists !== [] && this.state.searchedPlaylists.playlists && this.state.searchedPlaylists.playlists.items) ? this.state.searchedPlaylists.playlists.items : []\r\n          })\r\n          break;\r\n\r\n        default:\r\n          this.setState({\r\n            results: []\r\n          }) \r\n          break;\r\n      }\r\n    }, 20)\r\n\r\n  }\r\n\r\n  checkForPlayer() {\r\n    const { _token } = this.state;\r\n  \r\n    if (window.Spotify !== null) {\r\n      \r\n      clearInterval(this.playerCheckInterval);\r\n\r\n      this.player = new window.Spotify.Player({\r\n        name: \"Mutter Spotify Player\",\r\n        getOAuthToken: cb => { cb(_token); },\r\n      });\r\n      this.createEventHandlers();\r\n  \r\n      this.player.connect();\r\n      const player_connected = true;\r\n      this.setState({player_connected});\r\n    }\r\n  }\r\n\r\n  checkForPlayer_driver(){\r\n    this.playerCheckInterval = setInterval(() => this.checkForPlayer(), 10);\r\n  }\r\n\r\n  createEventHandlers() {\r\n    this.player.on('initialization_error', e => { console.error(e); });\r\n    this.player.on('authentication_error', e => {\r\n      console.error(e);\r\n      this.setState({ loggedIn: false });\r\n    });\r\n    this.player.on('account_error', e => { console.error(e); });\r\n    this.player.on('playback_error', e => { console.error(e); });\r\n  \r\n    // Playback status updates  \r\n    this.player.on('player_state_changed', state => this.onStateChanged(state));\r\n    // Ready\r\n    this.player.on('ready', async data => {\r\n      let { device_id } = data;\r\n      console.log(\"Let the music play on!\");\r\n      this.setState({ deviceId: device_id });\r\n      this.transferPlaybackHere();\r\n    });\r\n  }\r\n\r\n  onStateChanged(state) {\r\n    // if we're no longer listening to music, we'll get a null state.\r\n    if (state !== null) {\r\n      const {\r\n        current_track: currentTrack,\r\n        position,\r\n        duration,\r\n      } = state.track_window;\r\n\r\n      const trackName = currentTrack.name\r\n      const trackUrl = \"https://open.spotify.com/track/\" + currentTrack.id\r\n      const albumName = currentTrack.album.name\r\n      const artistName = currentTrack.artists\r\n        .map(artist => artist.name)\r\n        .join(\", \");\r\n      const playing = !state.paused;\r\n      const albumArt = currentTrack.album.images[0].url;\r\n      this.setState({\r\n        position,\r\n        duration,\r\n        trackName,\r\n        trackUrl: trackUrl,\r\n        albumName,\r\n        artistName,\r\n        playing,\r\n        albumArt,\r\n      })\r\n    }\r\n  }\r\n\r\n  onPrevClick = () => {\r\n    if(this.state.player_connected){\r\n      this.player.previousTrack();\r\n    }\r\n  }\r\n  \r\n  onPlayClick = () => {\r\n    if(this.state.player_connected){\r\n      this.player.togglePlay();\r\n    }\r\n  }\r\n  \r\n  onNextClick = () => {\r\n    if(this.state.player_connected){\r\n      this.player.nextTrack();\r\n    }\r\n  }\r\n  \r\n  transferPlaybackHere() {\r\n    const { deviceId, _token } = this.state;\r\n    fetch(\"https://api.spotify.com/v1/me/player\", {\r\n      method: \"PUT\",\r\n      headers: {\r\n        authorization: `Bearer ${_token}`,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        \"device_ids\": [ deviceId ],\r\n        \"play\": false,\r\n      }),\r\n    });\r\n  }\r\n\r\n  createPost = () => { \r\n    this.props.history.push({\r\n      pathname: '/createpost',\r\n      state: {title: this.state.trackName, url: this.state.trackUrl}\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { value, results, recentlyPlayed, topTracks, newReleases, trackName, artistName, albumName, albumArt, playing, _token, deviceId, account_type, player_connected } = this.state\r\n\r\n    let history = this.props.history\r\n    let searchResults = []\r\n    let newAlbums = []\r\n    const recents = []\r\n    const top = []\r\n    let i;\r\n\r\n    if (results !== 'undefined') {\r\n      for (i = 0; i < Math.min(results.length, 5); i++) {\r\n        let title = results[i].name\r\n        let artist = results[i].type === 'track' ? results[i].artists[0].name : results[i].type === 'playlist' ? results[i].owner.display_name : results[i].type === 'album' ? results[i].artists[0].name : ''\r\n        let album = results[i].type === 'track' ? results[i].album.name : ''\r\n        let art_url = results[i].type === 'artist' || results[i].type === 'playlist' || results[i].type === 'album' ? (results[i].images.length > 0 ? results[i].images[0].url : '') : results[i].album.images[0].url\r\n        let url = results[i].external_urls.spotify\r\n        let access_token = _token\r\n        let uri = results[i].uri\r\n        let deviceid = deviceId\r\n        let type = results[i].type\r\n        searchResults.push(new SongInfo(title, artist, album, art_url, url, access_token, uri, deviceid, type, account_type, player_connected, history))\r\n      }\r\n    } \r\n\r\n    if (recentlyPlayed !== 'undefined') {\r\n      for (i = 0; i < Math.min(recentlyPlayed.length, 5); i++) {\r\n        let title = recentlyPlayed[i].track.name\r\n        let artist = recentlyPlayed[i].track.artists[0].name\r\n        let album = recentlyPlayed[i].track.album.name\r\n        let art_url = recentlyPlayed[i].track.album.images[0].url\r\n        let url = recentlyPlayed[i].track.external_urls.spotify\r\n        let access_token = _token\r\n        let uri = recentlyPlayed[i].track.uri\r\n        let deviceid = deviceId\r\n        let type = recentlyPlayed[i].track.type\r\n        recents.push(new SongInfo(title, artist, album, art_url, url, access_token, uri, deviceid, type, account_type, player_connected, history))\r\n      }\r\n    }\r\n\r\n    if (topTracks !== 'undefined') {\r\n    for (i = 0; i < Math.min(topTracks.length, 5); i++) {\r\n        let title = topTracks[i].name\r\n        let artist = topTracks[i].artists[0].name\r\n        let album = topTracks[i].album.name\r\n        let art_url = topTracks[i].album.images[0].url\r\n        let url = topTracks[i].external_urls.spotify\r\n        let access_token = _token\r\n        let uri = topTracks[i].uri\r\n        let deviceid = deviceId\r\n        let type = topTracks[i].type\r\n        top.push(new SongInfo(title, artist, album, art_url, url, access_token, uri, deviceid, type, account_type, player_connected, history))\r\n      }\r\n    }\r\n\r\n    if (newReleases !== 'undefined') {\r\n      for (i = 0; i < Math.min(newReleases.length, 5); i++) {\r\n        let title = newReleases[i].name\r\n        let artist = newReleases[i].artists[0].name\r\n        let art_url = newReleases[i].images[0].url\r\n        let url = newReleases[i].external_urls.spotify\r\n        let access_token = _token\r\n        let uri = newReleases[i].uri\r\n        let deviceid = deviceId\r\n        let type = newReleases[i].type\r\n        newAlbums.push(new SongInfo(title, artist, \"\", art_url, url, access_token, uri, deviceid, type, account_type, player_connected, history))\r\n      }\r\n    }\r\n\r\n    let player =\r\n      <Menu.Item>\r\n        <Grid>\r\n          <Button key={0} inverted icon='backward' onClick={this.onPrevClick}></Button>\r\n          <Button key={1} inverted icon={(playing) ? 'pause' : 'play'} onClick={this.onPlayClick}></Button>\r\n          <Button key={2} inverted icon='forward' onClick={this.onNextClick}></Button>\r\n          <Popup key={3} trigger={<Menu.Item>{trackName}</Menu.Item>} position='bottom center'>\r\n          <Popup.Content>\r\n            <Card centered raised>\r\n            <Card.Content>\r\n                <Card.Header>{trackName}</Card.Header>\r\n                <Card.Meta>{albumName + ' - ' + artistName}</Card.Meta>\r\n                <Image src={albumArt}/>\r\n            </Card.Content>\r\n            </Card>\r\n          </Popup.Content>\r\n          </Popup>\r\n          <Popup key={4} trigger={<Button inverted icon='plus' onClick={this.createPost}/>} position='bottom center'>\r\n            <Popup.Content>\r\n              Create post\r\n            </Popup.Content>\r\n          </Popup>\r\n        </Grid>\r\n      </Menu.Item>\r\n    return (\r\n      <div className='Discover'>\r\n        { // Top bar for player\r\n          <Menu inverted>\r\n            { this.state.account_type === 'premium' ? // Show Player only if User is Premium on Spotify\r\n            (this.state.loggedIn && !(this.state.player_connected && trackName !== undefined)) ? // Show \"button\" when logged in and either we have not started the web player, or the webplayer hasn't loaded yet (checked based on song name)\r\n              <Menu.Item onClick={() => this.checkForPlayer_driver()}>\r\n                Launch Web Player\r\n              </Menu.Item>\r\n              :\r\n              player : null\r\n          }\r\n\r\n\r\n            <Menu.Item position='right' onClick={()=>console.log()}>\r\n              <Grid centered>\r\n                <Search fluid\r\n                  showNoResults={false}\r\n                  size='large'\r\n                  onSearchChange={_.debounce(this.handleSearchChange, 20)}\r\n                  value={value}\r\n                  placeholder={'Search for ' + this.state.searchButton + '...'}\r\n                  />\r\n                <Button.Group labeled>\r\n                  <Button positive={this.state.searchButton === 'songs'} secondary content='Song' onClick={() => this.setState({value: '', results: [], searchButton: 'songs'})} />\r\n                  <Button positive={this.state.searchButton === 'artists'} secondary content='Artist' onClick={() => this.setState({value: '', results: [], searchButton: 'artists'})} />\r\n                  <Button positive={this.state.searchButton === 'albums'} secondary content='Album' onClick={() => this.setState({value: '', results: [], searchButton: 'albums'})} />\r\n                  <Button positive={this.state.searchButton === 'playlists'} secondary content='Playlist' onClick={() => this.setState({value: '', results: [], searchButton: 'playlists'})} />\r\n                </Button.Group>\r\n              </Grid>\r\n            </Menu.Item>\r\n\r\n            { this.state.loggedIn ?\r\n              <Menu.Item href={spotifyUrl}>\r\n                Spotify Status: <p style={{color: (this.state.account_type === 'premium') ? 'gold' : 'green', whiteSpace: 'pre'}}> {this.state.account_type.charAt(0).toUpperCase() + this.state.account_type.slice(1)} </p>\r\n              </Menu.Item> :\r\n              <Menu.Item href={spotifyUrl}>\r\n                Sign In To Spotify  \r\n              </Menu.Item>\r\n            }\r\n          </Menu>\r\n        }\r\n\r\n        {!this.state.loggedIn && this.state._token === '' ? <p align='center' style={{color: '#139bd1', fontSize: '26px'}}>Welcome! <br /> Please log into Spotify to get started.</p> : null}\r\n\r\n        {(searchResults.length !== 0) ? \r\n          <SongSection\r\n          title='Search Results'\r\n          song_info={searchResults}\r\n          expand={this.expandSection}\r\n        /> : null\r\n        }\r\n\r\n        {(recents.length !== 0) ?\r\n        <SongSection\r\n          title='Recent Songs'\r\n          song_info={recents}\r\n        /> : null\r\n        }\r\n\r\n        {(top.length !== 0) ?\r\n        <SongSection\r\n          title='Your Top Picks'\r\n          song_info={top}\r\n        /> : null\r\n        }\r\n        \r\n        {(newAlbums.length !== 0) ?\r\n        <SongSection\r\n          title='New Releases'\r\n          song_info={newAlbums}\r\n        /> : null\r\n        }\r\n        <br/>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nclass SongSection extends Component {\r\n  render() {\r\n    const {title, song_info} = this.props\r\n\r\n    return (\r\n      <div>\r\n        <br/>\r\n          <Container fluid>\r\n            <Header as='h2' textAlign='center'>{title}</Header>\r\n            <Divider/>\r\n            <SongGrid song_info={song_info}/>\r\n            <Divider hidden/>\r\n            <Divider hidden/>\r\n          </Container>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    profile: state.firebase.profile\r\n  }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(Discover)\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Button, Form, ButtonContent, Icon } from 'semantic-ui-react'\r\nimport { signUp } from '../../../store/actions/authActions'\r\n\r\n\r\nclass SignUp extends Component {\r\n    state = {\r\n        email: '',\r\n        password: '',\r\n        name: ''\r\n    }\r\n\r\n    submit = () => {\r\n        this.props.signUp(this.state)\r\n    }\r\n\r\n    change = (e) => {\r\n        this.setState({\r\n            [e.target.id]: e.target.value\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const { authError } = this.props\r\n        return (\r\n            <Form onSubmit={this.submit}>\r\n                <Form.Field>\r\n                    <Form.Input label='Email' id='email' placeholder='Enter your email' onChange={this.change}/>\r\n                </Form.Field>\r\n                <Form.Field>\r\n                    <Form.Input label='Password' id='password' placeholder='Enter your password' type='password' onChange={this.change}/>\r\n                </Form.Field>\r\n                <Form.Field>\r\n                    <Form.Input label='Name' id='name' placeholder='Enter your name' onChange={this.change}/>\r\n                </Form.Field>\r\n                {authError ? <p style={{color: 'red'}}>{authError}</p> : null}\r\n                <Form.Field control={Button}>\r\n                    <ButtonContent>\r\n                        <Icon name='headphones'/>\r\n                        Sign Up\r\n                    </ButtonContent>\r\n                </Form.Field>\r\n            </Form>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n      authError: state.auth.authError\r\n    }\r\n  }\r\n  \r\n  \r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        signUp: (newUser) => dispatch(signUp(newUser))\r\n    }\r\n}\r\n  \r\n  \r\nexport default connect(mapStateToProps, mapDispatchToProps)(SignUp)\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Button, Form, ButtonContent, Icon } from 'semantic-ui-react'\r\nimport { signIn } from '../../../store/actions/authActions'\r\n\r\n\r\nclass SignIn extends Component {\r\n    state = {\r\n        email: '',\r\n        password: ''\r\n    }\r\n\r\n    submit = () => {\r\n        this.props.signIn(this.state)\r\n    }\r\n\r\n    change = (e) => {\r\n        this.setState({\r\n            [e.target.id]: e.target.value\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const { authError } = this.props\r\n        return (\r\n            <Form onSubmit={this.submit}>\r\n                <Form.Field>\r\n                    <Form.Input label='Email' id='email' placeholder='Enter your email' onChange={this.change}/>\r\n                </Form.Field>\r\n                <Form.Field>\r\n                    <Form.Input label='Password' id='password' placeholder='Enter your password' type='password' onChange={this.change}/>\r\n                </Form.Field>\r\n                {authError ? <p style={{color: 'red'}}>{authError}</p> : null}\r\n                <Form.Field control={Button} fluid>\r\n                    <ButtonContent>\r\n                        <Icon name='headphones'/>\r\n                        Sign In\r\n                    </ButtonContent>\r\n                </Form.Field>\r\n            </Form>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        authError: state.auth.authError\r\n    }\r\n}\r\n  \r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        signIn: (creds) => dispatch(signIn(creds))\r\n    }\r\n}\r\n  \r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SignIn)\r\n","import React, { Component } from 'react'\r\nimport { Button, ButtonContent, Icon, Segment } from 'semantic-ui-react'\r\nimport SignUp from './signup'\r\nimport SignIn from './signin'\r\n\r\n\r\n// TODO: A lot of code overlap with SignUp/SignIn. Refactor into one class\r\nclass LoginForm extends Component {\r\n    state = {\r\n        signing_up: false\r\n    }\r\n\r\n    sign_up = (word) => {\r\n        this.setState( {signing_up: word})\r\n    }\r\n\r\n    render() {\r\n        const signing_area = this.state.signing_up ? <SignUp/> : <SignIn/>\r\n        return (\r\n            <div>\r\n                <Button.Group>\r\n                    <Button color='yellow' onClick={() => {this.sign_up(true)}}>\r\n                        <ButtonContent>\r\n                            <Icon name='plus'/>\r\n                            Sign Up\r\n                        </ButtonContent>\r\n                    </Button>\r\n                    <Button.Or/>\r\n                    <Button color='yellow' onClick={() => {this.sign_up(false)}}>\r\n                        <ButtonContent>\r\n                        <Icon name='music'/>\r\n                            Sign In\r\n                        </ButtonContent>\r\n                    </Button>\r\n                </Button.Group>\r\n                <Segment>\r\n                    {signing_area}\r\n                </Segment>\r\n                </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default LoginForm\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Redirect } from 'react-router-dom'\r\nimport { Image, Grid, GridRow } from 'semantic-ui-react'\r\nimport LoginForm from './loginForm'\r\n\r\n\r\nclass Login extends Component {\r\n\r\n    render() {\r\n        const { auth } = this.props\r\n        if (auth.isLoaded && auth.uid) {\r\n            return <Redirect to='/'/>\r\n        }\r\n        else {\r\n            return (\r\n                <Grid padded centered>\r\n                    <Image src={process.env.PUBLIC_URL + \"/img/silhouette_2.png\"}/>\r\n                    <GridRow> <LoginForm/> </GridRow>\r\n                </Grid>\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n      auth: state.firebase.auth\r\n    }\r\n  }\r\n  \r\n\r\nexport default connect(mapStateToProps)(Login)\r\n","import React from 'react';\r\nimport moment from 'moment';\r\nimport { Feed, Divider } from 'semantic-ui-react'\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\nconst PostSummary = ({post, users}) => {\r\n  const user = users && post ? users.filter(user => user.id === post.authorId)[0] : null\r\n\r\n  const summary = \r\n    <div>\r\n      <Link to={'/profile/' + post.authorId}> {post.author} </Link>\r\n      rated song <b><a href={post.url ? post.url : null}> {post.song} </a></b>\r\n      <span className={\"fa fa-star \" + (post.rating >= 1 ? 'star_checked' : '')}></span>\r\n      <span className={\"fa fa-star \" + (post.rating >= 2 ? 'star_checked' : '')}></span>\r\n      <span className={\"fa fa-star \" + (post.rating >= 3 ? 'star_checked' : '')}></span>\r\n      <span className={\"fa fa-star \" + (post.rating >= 4 ? 'star_checked' : '')}></span>\r\n      <span className={\"fa fa-star \" + (post.rating >= 5 ? 'star_checked' : '')}></span> \r\n    </div>\r\n  \r\n\r\n  return (\r\n\r\n    user && post ?\r\n    <div>\r\n      <Feed size='large'>\r\n        <Feed.Event\r\n          image={user.imageUrl}\r\n          date={moment(post.createdAt.toDate()).format('LLLL')}\r\n          summary={summary}\r\n          extraText={post.comment}\r\n        />\r\n      </Feed>\r\n      <Divider />\r\n    </div> : null\r\n  )\r\n}\r\n\r\n\r\nexport default PostSummary;","import React from 'react';\r\nimport PostSummary from './postSummary';\r\n\r\n\r\nconst PostList = ({posts, users}) => {\r\n  return (\r\n    <div>\r\n        {(posts && (posts.length === 0)) ? <h3>No Posts Yet!</h3> : null}\r\n        { posts && posts.map(post => {\r\n          return (\r\n            <PostSummary key={post.id} post={post} users={users} />\r\n          )\r\n        })}\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default PostList;","import React, { Component } from 'react'\r\nimport { Tab, Divider } from 'semantic-ui-react'\r\nimport { compose } from 'redux'\r\nimport { firestoreConnect } from 'react-redux-firebase'\r\nimport { connect } from 'react-redux'\r\nimport PostList from './postList'\r\n\r\nexport class Feed extends Component {\r\n  state = {\r\n    friendsPosts: null,\r\n    explorePosts: null,\r\n    users: null,\r\n  }\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    let newPosts = {}\r\n    if (nextProps.explorePosts !== prevState.explorePosts) {\r\n      Object.assign(newPosts, {explorePosts: nextProps.explorePosts})\r\n    }\r\n    if (nextProps.friendsPosts !== undefined && nextProps.friendsPosts !== prevState.friendsPosts) {\r\n      Object.assign(newPosts, {friendsPosts: nextProps.friendsPosts})\r\n    }\r\n    if (nextProps.users !== undefined && nextProps.users !== prevState.users) {\r\n      Object.assign(newPosts, {users: nextProps.users})\r\n    }\r\n    return (newPosts.length !== 0) ? newPosts : null;\r\n  }\r\n\r\n  render() {\r\n    let feedPanes = [\r\n      { menuItem: 'Friends', render: () => <Tab.Pane><PostList posts={this.state.friendsPosts} users={this.state.users}/></Tab.Pane> },\r\n      { menuItem: 'Explore', render: () => <Tab.Pane><PostList posts={this.state.explorePosts} users={this.state.users}/></Tab.Pane> },\r\n    ]\r\n  \r\n    return (\r\n      <div>\r\n        <Divider hidden />\r\n        <Tab panes={feedPanes}/> \r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  //creates the friends list for us to query\r\n  var currentFriendsList = [\"0\"]; //This is the dummy value\r\n  for(var key in state.firestore.ordered.users)\r\n  {\r\n    if(state.firebase.auth[\"uid\"] === state.firestore.ordered.users[key][\"id\"])\r\n    {\r\n      currentFriendsList = state.firestore.ordered.users[key][\"friends\"];\r\n    }\r\n  }\r\n\r\n  //sort friendsPosts, because the sortBy doesn't work\r\n  if(state.firestore.ordered.friendsPosts != null){\r\n  var sortedFriendsArray = state.firestore.ordered.friendsPosts.sort(function (a, b) {\r\n    return b.createdAt[\"seconds\"] - a.createdAt[\"seconds\"];\r\n  })\r\n  }\r\n\r\n  //This is if we wanted to allow personal private posts to be shown on explore page\r\n  //find a way to combine publicPosts and privatePersonalPosts for the explore page \r\n  // if(state.firestore.ordered.publicPosts != null && state.firestore.ordered.privatePersonalPosts != null){\r\n  // var sortedExploreArray = state.firestore.ordered.publicPosts.concat(state.firestore.ordered.privatePersonalPosts)\r\n  //                                                   .sort(function (a, b) {\r\n  //   return b.createdAt[\"seconds\"] - a.createdAt[\"seconds\"];\r\n  // })\r\n  // }\r\n  if(state.firestore.ordered.publicPosts)\r\n    var sortedExploreArray = state.firestore.ordered.publicPosts.sort(function (a, b) {return b.createdAt[\"seconds\"] - a.createdAt[\"seconds\"];})\r\n\r\n  return {\r\n    explorePosts: sortedExploreArray,\r\n    friendsPosts: sortedFriendsArray,\r\n    auth: state.firebase.auth,\r\n    users: state.firestore.ordered.users,\r\n    currentFriendsList: currentFriendsList\r\n  }\r\n}\r\n\r\n\r\nexport default compose(\r\n  connect(mapStateToProps),\r\n  firestoreConnect(props => [\r\n      { collection: 'users' },\r\n      {\r\n        collection: 'posts',\r\n        storeAs: 'friendsPosts',\r\n        where: ['authorId', 'in', props.currentFriendsList === null || props.currentFriendsList.length === 0 ? ['0'] : props.currentFriendsList]\r\n      },\r\n      { \r\n        collection: 'posts',\r\n        storeAs: 'publicPosts',\r\n        where: ['privacy', '==', 'public'],\r\n      },\r\n      // {\r\n      //   collection: 'posts',\r\n      //   storeAs: 'privatePersonalPosts',\r\n      //   where: [\r\n      //     ['authorId', '==', props.auth[\"uid\"]\r\n      //   ],\r\n      //     ['privacy', '==', 'private']\r\n      //   ]\r\n      // },\r\n  ])\r\n)(Feed);\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { createPost } from '../store/actions/postActions'\r\nimport { Form, Radio, Header, Container, Divider } from 'semantic-ui-react'\r\n\r\n// Semantic-UI\r\n// https://react.semantic-ui.com/\r\n// https://medium.com/@a.carreras.c/using-semantic-ui-react-your-react-js-app-523ddc9abeb3\r\n\r\n\r\nexport class CreatePost extends Component {\r\n\r\n  constructor(props) {\r\n    super();\r\n\r\n    const songInfo = props && props.location ? props.location.state : null;    \r\n    this.state = {\r\n      song: songInfo ? songInfo.title : '',\r\n      comment: '',\r\n      rating: '',\r\n      url: songInfo ? songInfo.url : '',\r\n      privacy: props.profile.privacy,\r\n      error: false,\r\n    }\r\n  }\r\n  \r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    if (nextProps.profile && nextProps.profile.isLoaded && nextProps.profile.privacy !== undefined && prevState.privacy === undefined) {\r\n      return {\r\n        privacy: nextProps.profile.privacy\r\n      }\r\n    }\r\n    else {\r\n      return null\r\n    }\r\n  }\r\n\r\n  handleChange = (e) => {\r\n    this.setState({\r\n      [e.target.id]: e.target.value\r\n    })\r\n  }\r\n\r\n  handleRating = (e, {value}) => {\r\n    this.setState({\r\n      'rating': value\r\n    })\r\n  }\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    if (this.state.rating) {\r\n      this.props.createPost({\r\n        song: this.state.song,\r\n        comment: this.state.comment,\r\n        rating: this.state.rating,\r\n        privacy: this.state.privacy,\r\n        url: this.state.url\r\n      })\r\n      this.props.history.push('/')\r\n    }\r\n    else {\r\n        this.setState({ error: 'Rating is required!' })\r\n    }\r\n  }\r\n\r\n  toggle = () => {\r\n    this.setState({\r\n      privacy: (this.state.privacy === 'private') ? 'public' : 'private',\r\n    })\r\n  }\r\n\r\n  render() {\r\n\r\n    return (\r\n      <Container text>\r\n        <Divider hidden />\r\n        <Header as='h2'>Create Post</Header>\r\n        <Form onSubmit={this.handleSubmit}>\r\n          <Form.Group widths='equal'>\r\n            <Form.Input\r\n              id='song'\r\n              label='Song'\r\n              name='Song'\r\n              required={this.state.song ? false : true}\r\n              readOnly={this.state.url ? true : false}\r\n              placeholder={this.state.song}\r\n              onChange={this.handleChange}\r\n            />\r\n            <Form.Input\r\n              id='url'\r\n              label='URL'\r\n              name='URL'\r\n              readOnly\r\n              disabled={this.state.url ? false : true}\r\n              placeholder={this.state.url}\r\n              onChange={this.handleChange}\r\n            />\r\n          </Form.Group>\r\n          <Form.Field\r\n              control={Radio}\r\n              toggle\r\n              label={this.state.privacy === 'private' ? 'This post will be Private' : 'This post will be Public'}\r\n              defaultChecked={this.state.privacy === 'private'}\r\n              onClick={this.toggle}\r\n            />\r\n          <Form.Dropdown\r\n            id='rating'\r\n            label='Rating'\r\n            placeholder='Select'\r\n            required\r\n            inline\r\n            error={this.state.error}\r\n            onChange={this.handleRating}\r\n            options={\r\n              [\r\n                {text: '1', value: 1},\r\n                {text: '2', value: 2},\r\n                {text: '3', value: 3},\r\n                {text: '4', value: 4},\r\n                {text: '5', value: 5}\r\n              ]\r\n            }\r\n          />\r\n\r\n          <Form.TextArea\r\n            id='comment'\r\n            label='Comment'\r\n            name='Comment'\r\n            onChange={this.handleChange}\r\n          />\r\n          <Form.Button type='submit' color='green'>Create Post</Form.Button>\r\n        </Form>\r\n      </Container>\r\n    )\r\n  }\r\n}\r\n \r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n      profile: state.firebase.profile\r\n  }\r\n}\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    createPost: (Post) => dispatch(createPost(Post))\r\n  }\r\n}\r\n\r\n\r\nexport default  connect(mapStateToProps, mapDispatchToProps)(CreatePost);\r\n","export const createPost = (post) => {\r\n  return (dispatch, getState, { getFirebase, getFirestore }) => {\r\n\r\n    // Make async call to database\r\n    const firestore = getFirestore()\r\n    const profile = getState().firebase.profile\r\n    const authorId = getState().firebase.auth.uid\r\n\r\n    firestore.collection('posts').add({\r\n      ...post, \r\n      author: profile.name,\r\n      authorId: authorId,\r\n      createdAt: new Date()\r\n    }).then(() => {\r\n      dispatch({ type: 'CREATE_POST', post: post })\r\n    }).catch((err) => {\r\n      dispatch({ type: 'CREATE_POST_ERROR', err: err })\r\n    })\r\n  }\r\n}\r\n","import React from 'react';\r\nimport { Feed, Divider } from 'semantic-ui-react'\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\nconst FriendList = ({friends, users}) => {\r\n  return (\r\n    <div>\r\n        {(friends && friends.length === 0) ? <h3>No Friends Yet :(</h3> : null }\r\n        { friends && users && friends.map(friend => {\r\n          const friend_info = users.filter(user => user.id === friend)[0]\r\n          const summary = friend_info ? <Link to={'/profile/' + friend}> {friend_info.name} </Link> : null\r\n          return (\r\n            <Feed key={friend}>\r\n              <Feed.Event\r\n                image={friend_info ? friend_info.imageUrl : null}\r\n                summary={summary}\r\n              />\r\n              <Divider fitted/>\r\n            </Feed>\r\n          )\r\n        })}\r\n        \r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default FriendList;","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport firebase from 'firebase';\r\nimport FileUploader from 'react-firebase-file-uploader';\r\nimport { updateImage } from '../../store/actions/authActions'\r\nimport { Grid, Progress, Header, Image, Button, Modal } from 'semantic-ui-react';\r\n\r\n// TODO: Check file type before uploading\r\n// https://github.com/fris-fruitig/react-firebase-file-uploader/issues/11#issuecomment-344598190 \r\n\r\n\r\nclass ModalUploadPicture extends Component {\r\n\r\n  constructor(uId) {\r\n    super()\r\n    this.uId = uId.uId\r\n  }\r\n\r\n  state = {\r\n    image: '',\r\n    isUploading: false,\r\n    progress: 0,\r\n    imageURL: '',\r\n    open: false\r\n  };\r\n\r\n  handleUploadStart = () => {\r\n    this.setState({isUploading: true, progress: 0, imageURL: null, image: null})\r\n  }\r\n  handleProgress = (progress) => this.setState({progress});\r\n  \r\n  handleUploadError = (error) => {\r\n    this.setState({isUploading: false})\r\n    console.error(error);\r\n  }\r\n \r\n  handleUploadSuccess = (filename) => {\r\n    this.setState({image: filename, progress: 100, isUploading: false});\r\n    firebase.storage().ref('profile_images').child(filename).getDownloadURL().then(url => {\r\n        this.setState({imageURL: url})\r\n        this.props.updateImage(this.uId, url)\r\n        this.handleModalClose()\r\n    });\r\n  }\r\n\r\n  handleModalClose = () => {\r\n    this.setState({\r\n      image: '',\r\n      isUploading: false,\r\n      progress: 0,\r\n      imageURL: '',\r\n      open: false\r\n    })\r\n  }\r\n    \r\n  render() {\r\n    const previousImageUrl = this.props.previousImageUrl\r\n\r\n    return (\r\n      <Modal\r\n        trigger={<Image src={previousImageUrl} size='medium' circular bordered/>}\r\n        open={this.state.open}\r\n        onOpen={() => this.setState({open: true})}\r\n        closeOnDimmerClick={false}\r\n        closeOnDocumentClick={false}\r\n        size='small'\r\n      >\r\n        <Modal.Content>                \r\n          <Grid divided stretched centered>\r\n            <Grid.Row stretched>\r\n              <Grid.Column stretched>\r\n                <Header as='h2'>Current</Header>\r\n                <Image src={previousImageUrl} wrapped size='medium' href={previousImageUrl} bordered/>\r\n              </Grid.Column>\r\n            </Grid.Row>\r\n            <Grid.Row stretched>\r\n              <Grid.Column stretched>\r\n              <Grid stretched columns={16}>\r\n                <Grid.Row>\r\n                <Grid.Column width={6}>\r\n                  <FileUploader\r\n                    accept=\"image/*\"\r\n                    name=\"image\"\r\n                    filename={ this.uId }\r\n                    storageRef={firebase.storage().ref('profile_images')}\r\n                    onUploadStart={this.handleUploadStart}\r\n                    onUploadError={this.handleUploadError}\r\n                    onUploadSuccess={this.handleUploadSuccess}\r\n                    onProgress={this.handleProgress}\r\n                    />\r\n                  </Grid.Column>\r\n                  <Grid.Column width={10}>\r\n                    {\r\n\r\n                      (this.state.imageURL) ? <Progress percent={100} success>Uploaded</Progress> :\r\n                        this.state.isUploading ?\r\n                          <Progress percent={this.state.progress} progress color='blue'/> :\r\n                          null\r\n                    }\r\n                  </Grid.Column>\r\n                  </Grid.Row>\r\n                </Grid>\r\n              </Grid.Column>\r\n            </Grid.Row>\r\n          </Grid>\r\n        </Modal.Content>\r\n        <Modal.Actions>\r\n          <Button color='red' onClick={() => {this.setState({open: false})}}>Cancel</Button>\r\n        </Modal.Actions>\r\n      </Modal>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    updateImage: (uId, imageUrl) => dispatch(updateImage(uId, imageUrl))\r\n  }\r\n}\r\n\r\n\r\nexport default connect(null, mapDispatchToProps)(ModalUploadPicture)\r\n","import React, { Component } from 'react'\r\nimport { compose } from 'redux';\r\nimport { connect } from 'react-redux';\r\nimport { firestoreConnect } from 'react-redux-firebase';\r\nimport { Redirect } from 'react-router-dom'\r\nimport { Grid, GridRow, Image, Button, Segment, Tab, GridColumn, Label, Modal, Form } from 'semantic-ui-react'\r\nimport { addFriend, removeFriend, acceptFriend } from '../../store/actions/authActions'\r\nimport CreatePost from '../createPost';\r\nimport PostList from '../feed/postList'\r\nimport FriendList from './friendList'\r\nimport UploadPicture from './modalUploadPicture';\r\nimport { updateProfile } from '../../store/actions/authActions'\r\n\r\nexport class Profile extends Component {\r\n\r\n  state = {\r\n    posts_content: null,\r\n    friends_content: null,\r\n    navigate: null,\r\n    open: false,\r\n    name: '',\r\n    privacy: null,\r\n    profile: null\r\n  }\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    let data = {}\r\n    if ((prevState.profile === null || prevState.profile.isLoading) && nextProps.profile) {\r\n      if (nextProps.profile.privacy !== undefined) {\r\n        Object.assign(data,\r\n          {\r\n            privacy: nextProps.profile.privacy,\r\n            profile: nextProps.profile\r\n          }\r\n        )\r\n      }\r\n\r\n      if (nextProps.profile.name !== undefined) {\r\n        Object.assign(data,\r\n          {\r\n            name: nextProps.profile.name\r\n          }\r\n        )\r\n      }\r\n    }\r\n    return data\r\n  }\r\n\r\n  navigate = (destination) => {\r\n    this.setState({\r\n      navigate: destination\r\n    })\r\n  }\r\n\r\n  handleChange = (e) => {\r\n    this.setState({\r\n      [e.target.id]: e.target.value\r\n    })\r\n  }\r\n\r\n  handleSubmit = (e) => {\r\n    this.handleSubmitPrivacy(e, this.state.privacy)\r\n  }\r\n\r\n  handleSubmitPrivacy = (e, privacy) => {\r\n    e.preventDefault()\r\n    this.props.updateProfile(this.props.auth.uid, {name: this.state.name, privacy: privacy, profile: this.state.profile})\r\n    this.props.history.push('/profile/' + this.props.auth.uid)\r\n    this.setState({open: false})\r\n  }\r\n\r\n  togglePrivacy = (e) => {\r\n    let new_privacy = (this.state.privacy === 'private') ? 'public' : 'private'\r\n    this.setState({\r\n      privacy: new_privacy\r\n    })\r\n    this.handleSubmitPrivacy(e, new_privacy)\r\n  }\r\n\r\n  render() {\r\n    const { auth, users, profile, match, curProfilePosts, currentFriendsList} = this.props;\r\n    const curProfileUser = users && auth ? users.filter(user => user.id === match.params.id)[0] : null\r\n    const imageUrl = curProfileUser ? curProfileUser.imageUrl : null\r\n    \r\n    const isUser = auth.uid && match.params && auth.uid === match.params.id;\r\n\r\n    let friendButton = match && auth ? <Button onClick={() => {this.props.addFriend(match.params.id, auth.uid)}}>Add Friend</Button> : null\r\n    if (auth && curProfileUser && curProfileUser.friends_pending && curProfileUser.friends_pending.includes(auth.uid))\r\n      friendButton = <Button>Friend Request Sent</Button>\r\n    else if (auth && curProfileUser && curProfileUser.friends.includes(auth.uid) && match)\r\n      friendButton = <Button onClick={() => {this.props.removeFriend(match.params.id, auth.uid)}}>Remove Friend</Button>\r\n    else if (profile && profile.friends_pending && auth && match && profile.friends_pending.includes(match.params.id))\r\n      friendButton = <Button onClick={() => {this.props.acceptFriend(match.params.id, auth.uid)}}>Accept Friend Request</Button>\r\n    \r\n      \r\n    let posts_content = <div> <PostList posts={curProfilePosts} users={users} /> </div>\r\n    let friends_content = curProfileUser ? \r\n          ((currentFriendsList && match && match.params && match.params.id && currentFriendsList.includes(match.params.id)) \r\n            || (auth && match && match.params && match.params.id && auth[\"uid\"] === match.params.id) ? \r\n            <div> <FriendList users={users} friends={curProfileUser.friends} /> </div> :\r\n            <div> <FriendList users={users} friends={[]} /> </div>)\r\n             : null\r\n\r\n    let profile_panes = [\r\n    {\r\n      menuItem: 'Posts',\r\n      render: () => <Tab.Pane>{posts_content}</Tab.Pane>\r\n    },\r\n    {\r\n      menuItem: 'Friends',\r\n      render: () => <Tab.Pane>{friends_content}</Tab.Pane>\r\n    }\r\n  ]\r\n\r\n    if (this.state.navigate === '/createpost') {\r\n      return (\r\n        <div><Redirect to={this.state.navigate}/><CreatePost/></div>\r\n      )\r\n    }\r\n\r\n    \r\n    return (\r\n      <div>\r\n        <Grid centered padded='vertically'>\r\n          <GridRow>\r\n            <Segment>\r\n              { isUser ?\r\n                <UploadPicture uId={auth.uid} previousImageUrl={imageUrl} /> :\r\n                <Image src={imageUrl} size='medium' circular bordered/>\r\n              }\r\n              <br/>\r\n              <Button as='div' labelPosition='left'>\r\n                <Label basic>\r\n                  {curProfileUser ? curProfileUser.name : null }\r\n                </Label>\r\n                { isUser ?\r\n                <Modal\r\n                  trigger={<Button compact icon='edit'/>}\r\n                  open={this.state.open}\r\n                  onOpen={() => this.setState({open: true})}\r\n                  closeOnDimmerClick={false}\r\n                  closeOnDocumentClick={false}\r\n                  size='small'\r\n                  >\r\n                    <Modal.Content>\r\n                      <Form onSubmit={this.handleSubmit}>\r\n                        <Form.Field>\r\n                          <label>New Name</label>\r\n                          <Form.Input id='name' onChange={this.handleChange} placeholder={curProfileUser ? curProfileUser.name : ''}/>\r\n                        </Form.Field>\r\n                        <Button type='submit' color='green'>Change name</Button>\r\n                        <Button floated='right' color='red'  onClick={() => this.setState({open: false})}>Cancel</Button>\r\n                      </Form>\r\n                    </Modal.Content>\r\n                  </Modal>\r\n                : null\r\n                }\r\n              </Button>\r\n\r\n              { isUser ?  // If the current profile is logged in user's profile\r\n                <div>\r\n                  <Grid>\r\n                    <Grid.Column floated='left'>\r\n                      <Button onClick={this.togglePrivacy} basic size='small' color={(this.state.privacy === 'private') ? 'red' : 'green'}>{(this.state.privacy === 'private') ? 'Private' : 'Public'}</Button>\r\n                    </Grid.Column>\r\n                    <Grid.Column floated='right'>\r\n                      <Button floated='right' icon='plus' onClick={() => {this.navigate('/createpost')}}/>\r\n                    </Grid.Column>\r\n                  </Grid>\r\n                </div> :\r\n                  friendButton\r\n              }\r\n            </Segment>\r\n          </GridRow>\r\n          <GridRow> <GridColumn width={16}> <Tab panes={profile_panes}/> </GridColumn> </GridRow>\r\n        </Grid>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if (this.state.navigate != null)\r\n      this.navigate(null)\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    //creates the friends list for the current user\r\n    let currentFriendsList = [\"0\"]; //This is the dummy value\r\n    for(let key in state.firestore.ordered.users)\r\n    {\r\n      if(state.firebase.auth[\"uid\"] === state.firestore.ordered.users[key][\"id\"])\r\n      {\r\n        currentFriendsList = state.firestore.ordered.users[key][\"friends\"];\r\n      }\r\n    }\r\n    \r\n    //This creates the posts on the profile that we are looking at\r\n    let curProfilePosts = [];\r\n    if(state.firestore.ordered.curPrivatePosts != null && state.firestore.ordered.curPublicPosts != null){\r\n      curProfilePosts = state.firestore.ordered.curPrivatePosts.concat(state.firestore.ordered.curPublicPosts).sort(function (a, b) {\r\n        return b.createdAt[\"seconds\"] - a.createdAt[\"seconds\"];\r\n    })\r\n    }\r\n    else if(state.firestore.ordered.curPublicPosts != null){\r\n      curProfilePosts = state.firestore.ordered.publicPosts;\r\n    }\r\n    else if(state.firestore.ordered.curPrivatePosts != null){\r\n      curProfilePosts = state.firestore.ordered.curPrivatePosts;\r\n    }\r\n\r\n  return {\r\n    curProfilePosts: curProfilePosts,\r\n    auth: state.firebase.auth,\r\n    profile: state.firebase.profile,\r\n    users: state.firestore.ordered.users,\r\n    currentFriendsList: currentFriendsList\r\n  }\r\n}\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    addFriend: (profile_user_id, logged_in_user_id) => dispatch(addFriend(profile_user_id, logged_in_user_id)),\r\n    removeFriend: (profile_user_id, logged_in_user_id) => dispatch(removeFriend(profile_user_id, logged_in_user_id)),\r\n    acceptFriend: (friend_user_id, logged_in_user_id) => dispatch(acceptFriend(friend_user_id, logged_in_user_id)),\r\n    updateProfile: (uId, newInfo) => dispatch(updateProfile(uId, newInfo))\r\n  }\r\n}\r\n\r\n\r\nexport default compose(\r\n  connect(mapStateToProps, mapDispatchToProps),\r\n  firestoreConnect(props => [\r\n    { collection: 'users' },\r\n      { \r\n      collection: 'posts',\r\n      storeAs: 'curPrivatePosts',\r\n      where: [\r\n        ['authorId', '==', props.match.params.id],\r\n        [\r\n        'privacy', '==', \r\n        //get the private posts if they are friends OR they are the current user\r\n        //Otherwise we can only see their public posts\r\n        props.currentFriendsList === null || (props.match.params.id !== props.auth[\"uid\"] && !props.currentFriendsList.includes(props.match.params.id))?\r\n        '0':'private'\r\n        ],\r\n      ],\r\n     },\r\n     { \r\n      collection: 'posts',\r\n      storeAs: 'curPublicPosts',\r\n      where: [\r\n      //Alway just get the public posts, and we will add them together and sort them by their start time\r\n        ['authorId', '==', props.match.params.id],\r\n        ['privacy', '==','public'],\r\n      ],\r\n     },\r\n      \r\n  ])\r\n)(Profile);\r\n","import React, { Component } from 'react'\r\nimport { compose } from 'redux';\r\nimport { connect } from 'react-redux';\r\nimport { firestoreConnect } from 'react-redux-firebase';\r\nimport { Divider, Container, List, Image, Icon } from 'semantic-ui-react'\r\nimport { Link } from 'react-router-dom';\r\nimport { acceptFriend, rejectFriend } from '../../store/actions/authActions'\r\n\r\n\r\nexport class PendingList extends Component {\r\n\r\n  render() {\r\n\r\n    const { auth, users, profile, acceptFriend, rejectFriend } = this.props\r\n    const friend_requests = profile ? profile.friends_pending : null\r\n\r\n    return (\r\n      <div>\r\n        <Container text>\r\n          <Divider hidden />\r\n          {(friend_requests && friend_requests.length === 0) ? <h3>No Friends Requests</h3> : null }\r\n          { friend_requests && users && friend_requests.map(friend => {\r\n            const user_info = users.filter(user => user.id === friend)[0]\r\n            const summary = user_info ? <Link to={'/profile/' + friend}> {user_info.name} </Link> : null\r\n            \r\n            return (\r\n              <List divided animated relaxed verticalAlign='middle' size='big' key={friend}>\r\n                <List.Item>\r\n                  <Image avatar src={user_info ? user_info.imageUrl : null} />\r\n                  <List.Content> <List.Header>{summary}</List.Header> </List.Content>\r\n                  <List.Content floated='right'>\r\n                    <List.Description as='a' onClick={() => acceptFriend(friend, auth.uid)}>\r\n                      <Icon name='check' color='green'/>Accept\r\n                    </List.Description>\r\n                    <List.Description as='a' onClick={() => rejectFriend(friend, auth.uid)}>\r\n                      <Icon name='close' color='red'/>Reject\r\n                    </List.Description>\r\n                  </List.Content>\r\n                </List.Item>\r\n                <Divider/>\r\n              </List>\r\n            )\r\n          })}\r\n        </Container>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    auth: state.firebase.auth,\r\n    profile: state.firebase.profile,\r\n    users: state.firestore.ordered.users\r\n  }\r\n}\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    acceptFriend: (friend_user_id, logged_in_user_id) => dispatch(acceptFriend(friend_user_id, logged_in_user_id)),\r\n    rejectFriend: (friend_user_id, logged_in_user_id) => dispatch(rejectFriend(friend_user_id, logged_in_user_id))\r\n  }\r\n}\r\n\r\n\r\nexport default compose(\r\n  connect(mapStateToProps, mapDispatchToProps),\r\n  firestoreConnect([{ collection: 'users' }])\r\n)(PendingList)","import React, {Component} from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { Redirect } from 'react-router-dom'\r\nimport { Sidebar, Menu, Segment, Label, Image } from 'semantic-ui-react'\r\nimport { signOut } from '../../store/actions/authActions'\r\n\r\n\r\nclass SideNavbar extends Component {\r\n    LOGIN = 'LOGIN'\r\n    PROFILE = 'PROFILE'\r\n    DISCOVER = 'DISCOVER'\r\n    FEED = 'FEED'\r\n    REQUESTS = 'REQUESTS'\r\n    \r\n    state = {\r\n        redirect_target: null,\r\n        targets: {\r\n            FEED: '/',\r\n            LOGIN: '/login',\r\n            PROFILE: ('/profile/' + this.props.auth.uid),\r\n            DISCOVER: '/discover',\r\n            REQUESTS: '/requests'\r\n        },\r\n        visible: false,\r\n    }\r\n   \r\n    load = (target) => {\r\n        this.setState({\r\n            redirect_target: target,\r\n            visible: false\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const { profile } = this.props;\r\n        let logo = <Image circular centered size='mini' src={process.env.PUBLIC_URL + \"/img/logo.png\"} alt=\"\"/>\r\n        let imageTop = profile ? <Image circular centered size='mini' src={profile.imageUrl} alt=\"\"/> : null\r\n        let imageBot = profile ? <Image circular centered size='small' src={profile.imageUrl} alt=\"\"/> : null\r\n        let requests_num = profile && profile.friends_pending ? profile.friends_pending.length : 0\r\n        const requests = (requests_num > 0) ? \r\n            <Menu.Item onClick={() => {this.load(this.REQUESTS)}}>Friend Requests:\r\n                <Label color='teal'>{requests_num} </Label>\r\n            </Menu.Item> : null\r\n\r\n\r\n        const output = (\r\n            <div className='fullsize_div' id='sidebar_2'>\r\n                <Menu fixed='top' className='top_menu'>\r\n                    <Menu.Item icon='th list' onClick={() => {this.setState({visible: !this.state.visible})}}/>\r\n                    <Menu.Item header onClick={() => {this.load(this.FEED)}}>{logo}</Menu.Item>\r\n                    <Menu.Item onClick={() => {this.load(this.PROFILE)}}>{imageTop}</Menu.Item>\r\n                    {requests}\r\n                </Menu>\r\n                <div id='sidebar'>\r\n                <Sidebar.Pushable as={Segment}>\r\n                    <Sidebar as={Menu} animation={'slide along'} direction={'left'} icon='labeled' inverted vertical visible={this.state.visible} onHide={()=>this.setState({visible: false})} width='thin'>\r\n                        <Menu.Item onClick={() => {this.load(this.PROFILE)}} name='Profile'><br/>{imageBot}<br/>Profile</Menu.Item>,\r\n                        <Menu.Item onClick={() => {this.load(this.DISCOVER)}} icon='map' name='Discover'/>,\r\n                        <Menu.Item onClick={() => {this.load(this.FEED)}} icon='sitemap' name='Feed'/>,\r\n                        <Menu.Item onClick={this.props.signOut} name='Sign out' icon='sign out' position='right'/>\r\n                    </Sidebar>\r\n                    <Sidebar.Pusher dimmed={this.state.visible}>\r\n                            {this.props.content}\r\n                    </Sidebar.Pusher>\r\n                </Sidebar.Pushable>\r\n                </div>\r\n            </div>\r\n        )\r\n\r\n        if (this.state.redirect_target != null) {\r\n            let to_link = this.state.targets[this.state.redirect_target]\r\n            return (<div className='fullsize_div'><Redirect to={to_link}/>{output}</div>)\r\n        }\r\n        else {            \r\n            return output\r\n        }\r\n    }\r\n\r\n    // Clear redirect_target after render\r\n    componentDidUpdate() {\r\n        if (this.state.redirect_target != null) {\r\n            this.setState({\r\n                redirect_target: null\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        auth: state.firebase.auth,\r\n        profile: state.firebase.profile\r\n    }\r\n}\r\n  \r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        signOut: () => dispatch(signOut())\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SideNavbar)","import React, { Component } from 'react'\r\n\r\nexport class NotFound extends Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h1>404: Page not found</h1>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default NotFound\r\n","import React, { Component } from 'react';\r\nimport { Redirect, Switch, Route, BrowserRouter } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport { Loader, Image } from 'semantic-ui-react';\r\nimport Discover from './components/discover/discover'\r\nimport TokenHandler from './components/discover/tokenHandler'\r\nimport Login from './components/layout/login/login'\r\nimport Feed from './components/feed/feed'\r\nimport Profile from './components/profile/profile'\r\nimport PendingList from './components/profile/pendingList'\r\nimport SideNavbar from './components/layout/sideNavbar';\r\nimport CreatePost from './components/createPost'\r\nimport NotFound from './components/404'\r\n\r\n\r\nclass App extends Component {\r\n\r\n  state = { isLoading: true }\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    if (nextProps.auth.isLoaded && (nextProps.auth.isEmpty || nextProps.auth.uid)) {\r\n      return { isLoading: false }\r\n    }\r\n    else {\r\n      return null\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { auth } = this.props\r\n    const content = (\r\n      <Switch>\r\n        <Route exact path='/'           component={Feed} />\r\n        <Route path='/login'            component={Login} />\r\n        <Route path='/discover'         component={Discover} />\r\n        <Route path='/tokenHandler'     component={TokenHandler} />\r\n        <Route path='/profile/:id'      component={Profile} />\r\n        <Route path='/createpost'       component={CreatePost} />\r\n        <Route path='/requests'         component={PendingList} />\r\n        <Route                          component={NotFound} />\r\n      </Switch>\r\n    )\r\n\r\n    // Redirect forces user to load at Discover page if already logged in\r\n    const showLogin = (auth.isLoaded && auth.uid) ? \r\n      <SideNavbar content={content}/> : \r\n      <div><Redirect to='/' /> <Login /> </div>\r\n\r\n    return (\r\n      this.state.isLoading ? <div className='fullsize_div'> <Loader active size='massive'>Loading</Loader> </div>:\r\n      <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n          { showLogin }\r\n      </BrowserRouter>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    auth: state.firebase.auth\r\n  }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(App);\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","\r\nconst initState = {\r\n  authError: null\r\n}\r\n\r\nconst authReducer = (state = initState, action) => {\r\n  \r\n  switch(action.type){\r\n    case 'LOGIN_ERROR':\r\n      console.log('login error')\r\n      return {\r\n        ...state,\r\n        authError: 'Login Failed!'\r\n      }\r\n\r\n    case 'LOGIN_SUCCESS':\r\n      console.log('login success')\r\n      return {\r\n        ...state,\r\n        authError: null\r\n      }\r\n\r\n    case 'SIGNOUT_SUCCESS':\r\n      console.log('signout success')\r\n      return state\r\n\r\n    case 'SIGNUP_SUCCESS':\r\n      console.log('signup success')\r\n      return {\r\n        ...state,\r\n        authError: null\r\n      }\r\n\r\n    case 'SIGNUP_ERROR':\r\n      console.log('signup error')\r\n      return {\r\n        ...state,\r\n        authError: action.err.message\r\n      }\r\n\r\n    case 'USER_IMAGE': \r\n      console.log('Updated user image', action.uId, action.imageUrl)\r\n      return state\r\n\r\n    case 'USER_IMAGE_ERROR': \r\n      console.log('Update user image error', action.err)\r\n      return state\r\n\r\n    case 'USER_UPDATE': \r\n      console.log('Updated user profile', action.uId, action.newInfo)\r\n      return state\r\n\r\n    case 'USER_UPDATE_ERROR': \r\n      console.log('Update user profile error', action.err)\r\n      return state\r\n\r\n    case 'SEND_FRIEND_REQUEST': \r\n      console.log('Sent friend request', action.profile_user_id, action.logged_in_user_id)\r\n      return state\r\n\r\n    case 'SEND_FRIEND_REQUEST_ERROR': \r\n      console.log('Send friend request error', action.err)\r\n      return state\r\n\r\n    case 'REMOVE_FRIEND': \r\n      console.log('Sent friend request', action.profile_user_id, action.logged_in_user_id)\r\n      return state\r\n\r\n    case 'REMOVE_FRIEND_ERROR': \r\n      console.log('Send friend request error', action.err)\r\n      return state\r\n\r\n    case 'ACCEPT_FRIEND': \r\n      console.log('Accepted friend request', action.friend_user_id, action.logged_in_user_id)\r\n      return state\r\n\r\n    case 'ACCEPT_FRIEND_ERROR': \r\n      console.log('Accept friend request error', action.err)\r\n      return state\r\n\r\n    case 'REJECT_FRIEND': \r\n      console.log('Rejected friend request', action.friend_user_id, action.logged_in_user_id)\r\n      return state\r\n\r\n    case 'REJECT_FRIEND_ERROR': \r\n      console.log('Reject friend request error', action.err)\r\n      return state\r\n\r\n    case 'SPOTIFY_TOKEN': \r\n      console.log('Updated user spotify token', action.uId)\r\n      return state\r\n\r\n    case 'SPOTIFY_TOKEN_ERROR': \r\n      console.log('Update user spotify token error', action.err)\r\n      return state\r\n\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\n\r\nexport default authReducer","\r\nconst initState = {\r\n  posts: [\r\n    {'song': null}\r\n  ]\r\n}\r\n  \r\nconst postReducer = (state = initState, action) => {\r\n  switch (action.type) {\r\n    case 'CREATE_POST': \r\n      console.log('Created post:', action.post);\r\n      return state;\r\n\r\n    case 'CREATE_POST_ERROR': \r\n      console.log('Create post error:', action.err);\r\n      return state;\r\n\r\n    //TODO: add functionality for deleting and editing\r\n    /*\r\n    case 'DELETE_POST': \r\n      console.log('Deleted post:', action.project);\r\n      return state;\r\n    case 'DELETE_POST_ERROR': \r\n      console.log('Delete post error:', action.err);\r\n      return state;\r\n    case 'EDIT_POST': \r\n      console.log('Edited post:', action.project);\r\n      return state;\r\n    case 'EDIT_POST_ERROR': \r\n      console.log('Edit post error:', action.err);\r\n      return state;\r\n    */\r\n    default: \r\n      return state;\r\n  }\r\n}\r\n\r\nexport default postReducer\r\n","import authReducer from './authReducer'\r\nimport postReducer from './postReducer'\r\nimport { combineReducers } from 'redux'\r\nimport { firestoreReducer } from 'redux-firestore'\r\nimport { firebaseReducer } from 'react-redux-firebase'\r\n\r\n\r\nconst rootReducer = combineReducers({\r\n  auth: authReducer,\r\n  post: postReducer,\r\n  firestore: firestoreReducer,\r\n  firebase: firebaseReducer\r\n});\r\n\r\n\r\nexport default rootReducer\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { createStore, applyMiddleware, compose } from 'redux'\r\nimport rootReducer from './store/reducers/rootReducer'\r\nimport { Provider } from 'react-redux'\r\nimport thunk from 'redux-thunk'\r\nimport { reduxFirestore, getFirestore, createFirestoreInstance } from 'redux-firestore';\r\nimport { ReactReduxFirebaseProvider, getFirebase  } from 'react-redux-firebase';\r\nimport firebase from './config/fbConfig'\r\n\r\n\r\n// Create config for rrfProps object. We need this to pass it in the ReactReduxFirebaseProvider component\r\nconst rrfConfig = {\r\n  useFirestoreForProfile: true, // Firestore for Profile instead of Realtime DB\r\n  userProfile: 'users',\r\n  attachAuthIsReady: true,\r\n};\r\n\r\nconst store = createStore(rootReducer,\r\n  compose(\r\n    applyMiddleware(thunk.withExtraArgument({ getFirebase, getFirestore })),\r\n    reduxFirestore(firebase), // Get access to firestore via getFirestore function\r\n));\r\n\r\nconst rrfProps = {\r\n  firebase,\r\n  config: rrfConfig,\r\n  dispatch: store.dispatch,\r\n  createFirestoreInstance, // Create firestore instead of craete it in fbConfig.js\r\n};\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <ReactReduxFirebaseProvider {...rrfProps}>\r\n      <App />\r\n    </ReactReduxFirebaseProvider>\r\n  </Provider>,\r\n  document.getElementById('root'),\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}