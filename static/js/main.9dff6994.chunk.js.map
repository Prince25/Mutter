{"version":3,"sources":["components/discover/songCard.js","components/discover/songGrid.js","config/fbConfig.js","store/actions/authActions.js","components/discover/tokenHandler.js","components/discover/cancellablePromise.js","components/discover/discover.js","components/layout/login/signup.js","components/layout/login/signin.js","components/layout/login/loginForm.js","components/layout/login/login.js","components/feed/postSummary.js","components/feed/postList.js","components/feed/feed.js","components/createPost.js","store/actions/postActions.js","components/profile/friendList.js","components/profile/modalUploadPicture.js","components/profile/profile.js","components/profile/pendingList.js","components/layout/sideNavbar.js","components/404.js","App.js","serviceWorker.js","store/reducers/authReducer.js","store/reducers/postReducer.js","store/reducers/rootReducer.js","index.js"],"names":["SongCard","state","isOpen","handleOpen","setState","timeout","setTimeout","handleClose","clearTimeout","makePost","create_url","props","window","location","href","this","_token","url","uri","deviceid","type","account_type","fetch","method","headers","authorization","query","body","JSON","stringify","uris","context_uri","open","title","artist","album","art_url","player_connected","listen_button","Button","fluid","positive","onClick","playSong","Popup","trigger","basic","color","content","on","onClose","onOpen","position","Card","centered","raised","Content","floated","icon","Header","Meta","Image","src","extra","Component","SongGrid","song_info","Array","isArray","song_cards","map","info","index","Grid","Column","stretched","key","rows","Math","ceil","length","fill","currValue","Row","slice","columns","SongInfo","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","acceptFriend","friend_user_id","logged_in_user_id","dispatch","getState","getFirebase","firestore","getFirestore","collection","doc","update","friends_pending","FieldValue","arrayRemove","friends","arrayUnion","then","catch","err","TokenHandler","token","getHashParams","access_token","error","URLSearchParams","search","get","e","hashParams","r","q","hash","substring","exec","decodeURIComponent","handleToken","auth","isEmpty","updateToken","uid","history","push","className","as","textAlign","Divider","hidden","Icon","name","Loader","active","size","connect","uId","callback","spotify_token","makeCancellable","promise","isCancelled","Promise","resolve","reject","val","cancel","spotifyApi","SpotifyWebApi","spotifyUrl","REDIRECT_URI","console","log","encodeURIComponent","join","redirectUrlToSpotifyForLogin","base_url","Discover","handleSearchChange","value","results","searchButton","searchTracks","searchedTracks","tracks","items","searchArtists","searchedArtists","artists","searchAlbums","searchedAlbums","albums","searchPlaylists","searchedPlaylists","playlists","onPrevClick","player","previousTrack","onPlayClick","togglePlay","onNextClick","nextTrack","createPost","undefined","trackUrl","trackName","loggedIn","newReleases","recentlyPlayed","topTracks","deviceId","artistName","albumName","playing","duration","albumArt","accountTypePromise","newReleasesPromise","recentSongsPromise","topTracksPromise","searchTracksPromise","searchArtistsPromise","searchAlbumsPromise","searchPlaylistsPromise","initializeOnceMounted","route","disconnect","clearInterval","getToken","getAccessToken","setAccessToken","getAccountType","getNewReleases","getRecentSongs","getTopTracks","playerCheckInterval","listen","onRouteChange","bind","setInterval","initialize","promises","i","accountType","getMe","data","product","status","confirm","limit","offset","country","recentSongs","getMyRecentlyPlayedTracks","getMyTopTracks","keyword","Spotify","Player","getOAuthToken","cb","createEventHandlers","checkForPlayer","onStateChanged","a","async","device_id","transferPlaybackHere","track_window","currentTrack","current_track","id","paused","images","searchResults","newAlbums","recents","top","min","owner","display_name","external_urls","spotify","track","Menu","Item","inverted","checkForPlayer_driver","Search","showNoResults","onSearchChange","_","debounce","placeholder","Group","labeled","secondary","style","whiteSpace","charAt","toUpperCase","align","fontSize","expand","expandSection","nextProps","prevState","profile","isLoaded","SongSection","Container","SignUp","email","password","submit","signUp","change","target","authError","Form","onSubmit","Field","Input","label","onChange","control","ButtonContent","newUser","createUserWithEmailAndPassword","resp","user","set","privacy","imageUrl","SignIn","signIn","creds","credentials","signInWithEmailAndPassword","LoginForm","signing_up","sign_up","word","signing_area","Or","Segment","Login","to","padded","GridRow","PostSummary","post","users","filter","authorId","summary","author","song","rating","Event","image","date","moment","createdAt","toDate","format","extraText","comment","PostList","posts","Feed","friendsPosts","explorePosts","feedPanes","menuItem","render","Tab","Pane","panes","newPosts","Object","assign","compose","currentFriendsList","ordered","sortedFriendsArray","sort","b","publicPosts","sortedExploreArray","firestoreConnect","storeAs","where","CreatePost","handleChange","handleRating","handleSubmit","preventDefault","toggle","params","songName","SongName","songUrl","SongUrl","text","widths","required","readOnly","disabled","Radio","defaultChecked","Dropdown","inline","options","TextArea","Post","add","Date","FriendList","friend","friend_info","fitted","ModalUploadPicture","isUploading","progress","imageURL","handleUploadStart","handleProgress","handleUploadError","handleUploadSuccess","filename","storage","ref","child","getDownloadURL","updateImage","handleModalClose","previousImageUrl","Modal","circular","bordered","closeOnDimmerClick","closeOnDocumentClick","divided","wrapped","width","accept","storageRef","onUploadStart","onUploadError","onUploadSuccess","onProgress","Progress","percent","success","Actions","Profile","posts_content","friends_content","navigate","destination","handleSubmitPrivacy","updateProfile","togglePrivacy","new_privacy","match","curProfilePosts","curProfileUser","isUser","friendButton","addFriend","includes","removeFriend","profile_panes","labelPosition","Label","compact","GridColumn","isLoading","curPrivatePosts","curPublicPosts","concat","profile_user_id","newInfo","PendingList","rejectFriend","friend_requests","user_info","List","animated","relaxed","verticalAlign","avatar","Description","SideNavbar","LOGIN","PROFILE","DISCOVER","FEED","REQUESTS","redirect_target","targets","visible","load","imageTop","alt","imageBot","requests_num","requests","output","fixed","header","Sidebar","Pushable","animation","direction","vertical","onHide","signOut","Pusher","dimmed","to_link","NotFound","App","exact","path","component","showLogin","basename","process","Boolean","hostname","initState","authReducer","action","message","postReducer","rootReducer","combineReducers","firestoreReducer","firebaseReducer","store","createStore","applyMiddleware","thunk","withExtraArgument","reduxFirestore","rrfProps","config","useFirestoreForProfile","userProfile","attachAuthIsReady","createFirestoreInstance","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.9dff6994.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport { Card, Button, Image, Popup } from 'semantic-ui-react'\r\n\r\n\r\nconst timeoutLength = 1500\r\n\r\nclass SongCard extends Component {\r\n\r\n    state = { isOpen: false }\r\n\r\n    handleOpen = () => {\r\n        this.setState({ isOpen: true })\r\n\r\n        this.timeout = setTimeout(() => {\r\n        this.setState({ isOpen: false })\r\n        }, timeoutLength)\r\n    }\r\n\r\n    handleClose = () => {\r\n        this.setState({ isOpen: false })\r\n        clearTimeout(this.timeout)\r\n    }\r\n\r\n    playSong(){\r\n        let { _token, url, uri, deviceid, type, account_type } = this.props;\r\n\r\n        if (account_type === 'premium') {          \r\n            if(type === \"track\"){\r\n                fetch(\"https://api.spotify.com/v1/me/player/play\", {\r\n                method: \"PUT\",\r\n                headers: {\r\n                    authorization: `Bearer ${_token}`,\r\n                },\r\n                query:{\r\n                    \"device_id\":deviceid\r\n                },\r\n                body: JSON.stringify({\r\n                    uris:[uri]\r\n                }),\r\n            });\r\n            }\r\n            if(type === \"album\" || type === \"artist\" || type === \"playlist\"){\r\n                fetch(\"https://api.spotify.com/v1/me/player/play\", {\r\n                method: \"PUT\",\r\n                headers: {\r\n                    authorization: `Bearer ${_token}`,\r\n                },\r\n                query:{\r\n                    \"device_id\":deviceid\r\n                },\r\n                body: JSON.stringify({\r\n                    context_uri:uri\r\n                }),\r\n            });\r\n            }\r\n        } else if (account_type === 'free') {\r\n            window.open(url, '_blank noreferrer noopener')\r\n        }        \r\n    }\r\n\r\n    makePost = () => {\r\n        let { create_url } = this.props;\r\n        window.location.href = create_url;\r\n    }\r\n\r\n    render() {\r\n        let { title, artist, album, art_url, type, account_type, player_connected } = this.props;\r\n\r\n        const listen_button = (account_type === 'premium' && !player_connected) ? \r\n            <Popup\r\n            trigger={<Button fluid basic color='green'>Listen!</Button>}\r\n            content={'Please launch Web Player first!'}\r\n            on='click'\r\n            open={this.state.isOpen}\r\n            onClose={this.handleClose}\r\n            onOpen={this.handleOpen}\r\n            position='bottom center'\r\n            /> :\r\n            <Button fluid positive onClick={() => this.playSong()}>Listen!</Button>\r\n\r\n        return (\r\n            <Card centered raised>\r\n                <Card.Content>\r\n                    {type === 'track' ? <Popup content='Create a post' position='top center' trigger={<Button floated='right' icon='plus' onClick={this.makePost}/>}/> : null}\r\n                    <Card.Header>{title}</Card.Header>\r\n                    <Card.Meta>{album + ' - ' + artist}</Card.Meta>\r\n                    <Image src={art_url}/>\r\n                </Card.Content>\r\n                <Card.Content extra>\r\n                    {listen_button}\r\n                </Card.Content>\r\n            </Card>\r\n        )\r\n    }\r\n}\r\n\r\nexport default SongCard;","import React, { Component } from 'react'\r\nimport { Grid } from 'semantic-ui-react'\r\nimport SongCard from './songCard'\r\n\r\nclass SongGrid extends Component {\r\n\r\n    render() {\r\n        const { song_info } = this.props\r\n\r\n        if (!Array.isArray(song_info)) {\r\n            return null;\r\n        }\r\n        else {            \r\n            const song_cards = song_info.map((info, index) => <Grid.Column stretched key={index}><SongCard title={info.title} artist={info.artist} album={info.album} art_url={info.art_url}\r\n                 url={info.url} create_url={info.create_url} _token={info._token} uri={info.uri} deviceid={info.deviceid} type={info.type} account_type={info.account_type} player_connected={info.player_connected} /></Grid.Column>)\r\n            const rows = Array(Math.ceil(song_info.length / 5)).fill().map((currValue, index) => <Grid.Row key={index}>{song_cards.slice(index*5, index*5 + 5)}</Grid.Row>)\r\n            return (\r\n                <Grid columns='equal'>\r\n                    {rows}\r\n                </Grid>\r\n            )\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport class SongInfo {\r\n    title;\r\n    artist;\r\n    album;\r\n    art_url;\r\n    url;\r\n    create_url;\r\n    _token;\r\n    uri;\r\n    deviceid;\r\n    type;\r\n    account_type;\r\n    player_connected;\r\n\r\n    constructor(title, artist, album, art_url, url, create_url, _token, uri, deviceid, type, account_type, player_connected) {\r\n        this.title = title\r\n        this.artist = artist\r\n        this.album = album\r\n        this.art_url = art_url\r\n        this.url = url\r\n        this.create_url = create_url\r\n        this._token = _token\r\n        this.uri = uri\r\n        this.deviceid = deviceid\r\n        this.type = type\r\n        this.account_type = account_type\r\n        this.player_connected = player_connected\r\n    }\r\n}\r\n\r\nexport default SongGrid;","import firebase from 'firebase/app'\r\nimport 'firebase/firestore'\r\nimport 'firebase/auth'\r\n\r\n// Your web app's Firebase configuration\r\nvar firebaseConfig = {\r\n  apiKey: \"AIzaSyBMD75FP14e3VvxTRllOrc26K9vds7WHBs\",\r\n  authDomain: \"runtime-terror-web.firebaseapp.com\",\r\n  databaseURL: \"https://runtime-terror-web.firebaseio.com\",\r\n  projectId: \"runtime-terror-web\",\r\n  storageBucket: \"runtime-terror-web.appspot.com\",\r\n  messagingSenderId: \"714361214200\",\r\n  appId: \"1:714361214200:web:81690bccecf7b7ce18570d\"\r\n};\r\n\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nexport default firebase","import firebase from '../../config/fbConfig'\r\n\r\n\r\nexport const signIn = (credentials) => {\r\n  return (dispatch, getState) => {\r\n\r\n    // Make async call to database\r\n    firebase.auth().signInWithEmailAndPassword(\r\n      credentials.email,\r\n      credentials.password\r\n    ).then(() => {\r\n        dispatch({type: 'LOGIN_SUCCESS'})\r\n    }).catch((err) => {\r\n        dispatch({type: 'LOGIN_ERROR', err})\r\n    })\r\n  }\r\n}\r\n\r\n\r\nexport const signUp = (newUser) => {\r\n  return (dispatch, getState, {getFirestore}) => {\r\n\r\n    const firestore = getFirestore()\r\n\r\n    firebase.auth().createUserWithEmailAndPassword(\r\n      newUser.email,\r\n      newUser.password\r\n    ).then((resp) => {\r\n      firestore.collection('users').doc(resp.user.uid).set({\r\n        name: newUser.name,\r\n        friends: [],\r\n        friends_pending: [],\r\n        privacy: 'public',\r\n        spotify_token: '',\r\n        imageUrl: 'https://firebasestorage.googleapis.com/v0/b/runtime-terror-1d144.appspot.com/o/profile_images%2Fdefault_pic.png?alt=media&token=74c12ae4-d4ca-4ad2-af25-c38c2206ee43'\r\n      })\r\n    }).then(() => {\r\n      dispatch({ type: 'SIGNUP_SUCCESS' })\r\n    }).catch(err => {\r\n      dispatch({ type: 'SIGNUP_ERROR', err})\r\n    })\r\n  }\r\n}\r\n\r\n\r\nexport const signOut = () => {\r\n  return (dispatch, getState) => {\r\n    firebase.auth().signOut().then(() => {\r\n      dispatch({type: 'SIGNOUT_SUCCESS'})\r\n    })\r\n  }\r\n}\r\n\r\n\r\nexport const updateImage = (uId, imageUrl) => {\r\n  return (dispatch, getState, { getFirebase, getFirestore }) => {\r\n\r\n    // Make async call to database\r\n    const firestore = getFirestore()\r\n\r\n    firestore.collection('users').doc(uId).update({\r\n      imageUrl: imageUrl\r\n    }).then(() => {\r\n      dispatch({ type: 'USER_IMAGE', uId, imageUrl })\r\n    }).catch((err) => {\r\n      dispatch({ type: 'USER_IMAGE_ERROR', err })\r\n    })\r\n  }\r\n}\r\n\r\n\r\nexport const updateProfile = (uId, newInfo) => {\r\n  return (dispatch, getState, { getFirebase, getFirestore }) => {\r\n\r\n    // Make async call to database\r\n    const firestore = getFirestore()\r\n    const {name, privacy} = newInfo\r\n\r\n    firestore.collection('users').doc(uId).update({\r\n      name: name,\r\n      privacy: privacy\r\n    }).then(() => {\r\n      dispatch({ type: 'USER_UPDATE', uId, newInfo })\r\n    }).catch((err) => {\r\n      dispatch({ type: 'USER_UPDATE_ERROR', err })\r\n    })\r\n  }\r\n}\r\n\r\n\r\nexport const addFriend = (profile_user_id, logged_in_user_id) => {\r\n  return (dispatch, getState, { getFirebase, getFirestore }) => {\r\n\r\n    // Make async call to database\r\n    const firestore = getFirestore()\r\n\r\n    firestore.collection('users').doc(profile_user_id).update({\r\n      friends_pending: firestore.FieldValue.arrayUnion(logged_in_user_id)\r\n    }).then(() => {\r\n      dispatch({ type: 'SEND_FRIEND_REQUEST', profile_user_id, logged_in_user_id})\r\n    }).catch((err) => {\r\n      dispatch({ type: 'SEND_FRIEND_REQUEST_ERROR', err })\r\n    })\r\n  }\r\n}\r\n\r\n\r\nexport const removeFriend = (profile_user_id, logged_in_user_id) => {\r\n  return (dispatch, getState, { getFirebase, getFirestore }) => {\r\n\r\n    // Make async call to database\r\n    const firestore = getFirestore()\r\n\r\n    // Remove logged in user from profile user's friends list\r\n    firestore.collection('users').doc(profile_user_id).update({\r\n      friends: firestore.FieldValue.arrayRemove(logged_in_user_id)\r\n    })\r\n    \r\n    // Remove profile user from logged in user's friends list\r\n    firestore.collection('users').doc(logged_in_user_id).update({\r\n      friends: firestore.FieldValue.arrayRemove(profile_user_id)\r\n    }).then(() => {\r\n      dispatch({ type: 'REMOVE_FRIEND', profile_user_id, logged_in_user_id})\r\n    }).catch((err) => {\r\n      dispatch({ type: 'REMOVE_FRIEND_ERROR', err })\r\n    })\r\n  }\r\n}\r\n\r\n\r\nexport const acceptFriend = (friend_user_id, logged_in_user_id) => {\r\n  return (dispatch, getState, { getFirebase, getFirestore }) => {\r\n\r\n    // Make async call to database\r\n    const firestore = getFirestore()\r\n\r\n    // Remove incoming friend from logged in user's friends_pending list\r\n    firestore.collection('users').doc(logged_in_user_id).update({\r\n      friends_pending: firestore.FieldValue.arrayRemove(friend_user_id)\r\n    })\r\n    \r\n    // Add incoming friend to logged in user's friends list\r\n    firestore.collection('users').doc(logged_in_user_id).update({\r\n      friends: firestore.FieldValue.arrayUnion(friend_user_id)\r\n    })\r\n\r\n    // Add logged in user to incoming friend's friends list\r\n    firestore.collection('users').doc(friend_user_id).update({\r\n      friends: firestore.FieldValue.arrayUnion(logged_in_user_id)\r\n    }).then(() => {\r\n      dispatch({ type: 'ACCEPT_FRIEND', friend_user_id, logged_in_user_id})\r\n    }).catch((err) => {\r\n      dispatch({ type: 'ACCEPT_FRIEND_ERROR', err })\r\n    })\r\n  }\r\n}\r\n\r\n\r\nexport const rejectFriend = (friend_user_id, logged_in_user_id) => {\r\n  return (dispatch, getState, { getFirebase, getFirestore }) => {\r\n\r\n    // Make async call to database\r\n    const firestore = getFirestore()\r\n\r\n    // Remove incoming friend from logged in user's friends_pending list\r\n    firestore.collection('users').doc(logged_in_user_id).update({\r\n      friends_pending: firestore.FieldValue.arrayRemove(friend_user_id)\r\n    }).then(() => {\r\n      dispatch({ type: 'REJECT_FRIEND', friend_user_id, logged_in_user_id})\r\n    }).catch((err) => {\r\n      dispatch({ type: 'REJECT_FRIEND_ERROR', err })\r\n    })\r\n  }\r\n}\r\n\r\nexport const updateToken = (uId, token, callback) => {\r\n  return (dispatch, getState, { getFirebase, getFirestore }) => {\r\n\r\n    // Make async call to database\r\n    const firestore = getFirestore()\r\n\r\n    firestore.collection('users').doc(uId).update({\r\n      spotify_token: token\r\n    }).then(() => {\r\n      dispatch({ type: 'SPOTIFY_TOKEN', uId })\r\n    }).catch((err) => {\r\n      dispatch({ type: 'SPOTIFY_TOKEN_ERROR', err })\r\n    })\r\n\r\n    callback();\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Loader, Header, Icon, Divider } from 'semantic-ui-react'\r\nimport { updateToken } from '../../store/actions/authActions'\r\n\r\n\r\nexport class TokenHandler extends Component {\r\n\r\n  constructor(){\r\n    super();\r\n\r\n    const params = this.getHashParams();\r\n    const token = params.access_token;\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const error = urlParams.get('error')\r\n    this.state = {\r\n      token: token ? token : '',\r\n      error: error ? error : ''\r\n    }\r\n  }\r\n\r\n  getHashParams() {\r\n    let hashParams = {};\r\n    let e, r = /([^&;=]+)=?([^&;]*)/g,\r\n        q = window.location.hash.substring(1);\r\n    e = r.exec(q)\r\n    while (e) {\r\n       hashParams[e[1]] = decodeURIComponent(e[2]);\r\n       e = r.exec(q);\r\n    }\r\n    return hashParams;\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (!this.state.error)\r\n      this.handleToken()\r\n  }\r\n\r\n  handleToken() {\r\n    if (this.props.auth && !this.props.auth.isEmpty && this.state.token !== '') {\r\n      this.props.updateToken(this.props.auth.uid, this.state.token, () => \r\n        this.props.history.push(\"/discover\")\r\n      )\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className='fullsize_div'>\r\n        { this.state.error ? \r\n          <Header as='h2' icon textAlign='center'>\r\n            <Divider hidden />\r\n            <Divider hidden />\r\n            <Divider hidden />\r\n            <Icon name='exclamation triangle' />\r\n            An access error occured\r\n          </Header>\r\n          :\r\n          <Loader active size='massive'>Redirecting...</Loader>\r\n        }\r\n         \r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    auth: state.firebase.auth\r\n  }\r\n}\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    updateToken: (uId, token, callback) => dispatch(updateToken(uId, token, callback))\r\n  }\r\n}\r\n\r\n\r\nexport function redirectUrlToSpotifyForLogin() {\r\n\t// const CLIENT_ID = '1811b81e027e4dd291a2505a456b74e8'\r\n\tconst CLIENT_ID = '3a54934c90894909959dd11243291615'\r\n  const REDIRECT_URI = \r\n    process.env.NODE_ENV === \"production\"\r\n    ? 'https://princes25.github.io/Mutter/tokenhandler'\r\n    : 'http://localhost:3000/tokenhandler';\r\n  console.log(REDIRECT_URI)\r\n\r\n\tconst scopes = [\r\n    'user-read-private',\r\n    'user-read-email',\r\n    'user-read-playback-state',\r\n    'app-remote-control',\r\n    'user-read-recently-played',\r\n    'user-top-read',\r\n    'user-modify-playback-state',\r\n    'user-read-currently-playing',\r\n    'streaming'\r\n  ];\r\n  \r\n\treturn (\r\n\t\t\"https://accounts.spotify.com/authorize?client_id=\" +\r\n\t\tCLIENT_ID +\r\n\t\t\"&redirect_uri=\" +\r\n\t\tencodeURIComponent(REDIRECT_URI) +\r\n\t\t\"&scope=\" +\r\n\t\tencodeURIComponent(scopes.join(\" \")) +\r\n    \"&response_type=token\"\r\n\t);\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(TokenHandler)\r\n","// Based on solution found here: https://github.com/facebook/react/issues/5465#issuecomment-157888325\r\n\r\nexport const makeCancellable = (promise) => {\r\n    let isCancelled = false\r\n\r\n    const wrappedPromise = new Promise((resolve, reject) => {\r\n        promise.then( (val) => {\r\n            isCancelled ? reject({isCancelled: true}) : resolve(val)\r\n        });\r\n\r\n        promise.catch( (error) => {\r\n            isCancelled ? reject({isCancelled: true}) : reject(error)\r\n        })\r\n    })\r\n    \r\n    return {\r\n        promise: wrappedPromise,\r\n        cancel() {\r\n            isCancelled = true\r\n        },\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Container, Grid, Search, Header, Divider, Button, Menu, Image, Popup, Card } from 'semantic-ui-react'\r\nimport SongGrid, { SongInfo } from './songGrid'\r\nimport { redirectUrlToSpotifyForLogin } from './tokenHandler.js'\r\nimport SpotifyWebApi from 'spotify-web-api-js';\r\nimport { makeCancellable } from './cancellablePromise';\r\nimport _ from 'lodash'\r\n\r\nconst spotifyApi = new SpotifyWebApi();\r\nconst spotifyUrl = redirectUrlToSpotifyForLogin()\r\nconst base_url = \r\n  process.env.NODE_ENV === \"production\"\r\n  ? 'https://princes25.github.io/Mutter'\r\n  : 'http://localhost:3000';\r\n\r\n  \r\nexport class Discover extends Component {\r\n  constructor(){\r\n    super();\r\n\r\n    this.state = {\r\n      loggedIn: false,\r\n      searchButton: 'songs',\r\n      searchedTracks: [],\r\n      searchedArtists: [],\r\n      searchedAlbums: [],\r\n      searchedPlaylists: [],\r\n      value: '',\r\n      results: [],\r\n      newReleases: [],\r\n      recentlyPlayed: [],\r\n      topTracks: [],\r\n      _token: '',\r\n      deviceId: \"\",\r\n      error: \"\",\r\n      trackName: undefined,\r\n      trackUrl: undefined,\r\n      artistName: undefined,\r\n      albumName: undefined,\r\n      playing: false,\r\n      position: 0,\r\n      duration: 1,\r\n      albumArt: \"\",\r\n      player_connected: false,\r\n      account_type: 'Not Logged In. Click to authenticate!',\r\n      accountTypePromise: null,\r\n      newReleasesPromise: null,\r\n      recentSongsPromise: null,\r\n      topTracksPromise: null,\r\n      searchTracksPromise: null,\r\n      searchArtistsPromise: null,\r\n      searchAlbumsPromise: null,\r\n      searchPlaylistsPromise: null,\r\n      initializeOnceMounted: undefined\r\n    }\r\n  }\r\n  \r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    if (nextProps.profile.isLoaded && nextProps.profile.spotify_token && prevState._token !== nextProps.profile.spotify_token) {\r\n      return { _token: nextProps.profile.spotify_token, loggedIn: true }\r\n    }\r\n    else {\r\n      return null\r\n    }\r\n  }\r\n\r\n  onRouteChange(route) {\r\n    if(this.state.player_connected){\r\n      this.player.disconnect();\r\n    }\r\n  }\r\n  \r\n  initialize() {\r\n    if (this.state.loggedIn) {\r\n      clearInterval(this.initializeOnceMounted)\r\n      const token = this.state._token;\r\n      const getToken = spotifyApi.getAccessToken();\r\n      if (token) {\r\n        spotifyApi.setAccessToken(token);\r\n      }\r\n      else if(getToken){\r\n        spotifyApi.setAccessToken(getToken);\r\n      }\r\n      this.getAccountType();\r\n      this.getNewReleases()\r\n      this.getRecentSongs();\r\n      this.getTopTracks();\r\n      this.playerCheckInterval = null;\r\n      this.props.history.listen(this.onRouteChange.bind(this));\r\n    } \r\n  }\r\n\r\n  componentDidMount() {\r\n    this.initializeOnceMounted = setInterval(() => this.initialize(), 20)\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const {accountTypePromise, newReleasesPromise, recentSongsPromise, topTracksPromise, searchTracksPromise, searchArtistsPromise, searchAlbumsPromise, searchPlaylistsPromise} = this.state\r\n    const promises = [accountTypePromise, newReleasesPromise, recentSongsPromise, topTracksPromise, searchTracksPromise, searchArtistsPromise, searchAlbumsPromise, searchPlaylistsPromise]\r\n    for (let i = 0; i < promises.length; i++) {\r\n      if (promises[i]) {\r\n        promises[i].cancel()\r\n      }\r\n    }\r\n    if (this.initializeOnceMounted !== undefined)\r\n      clearInterval(this.initializeOnceMounted)\r\n  }\r\n\r\n  getAccountType(){\r\n    let accountType = makeCancellable(spotifyApi.getMe())\r\n    \r\n    this.setState({accountTypePromise: accountType}, () => {\r\n      accountType.promise.then((data) => {\r\n        const product = data.product === 'premium' ? 'premium' : 'free' // Since it may return 'open', which is also free\r\n        this.setState({account_type: product});\r\n        return data;\r\n      }, function(err) {\r\n        console.log(\"Something went wrong!\", err);\r\n        if (err.status === 401)\r\n          if (window.confirm(\"Token Expired! Please re-login to Spotify!\")) \r\n            window.location.href = spotifyUrl;\r\n      })\r\n    })\r\n  }\r\n\r\n  getNewReleases(){\r\n    let newReleases = makeCancellable(spotifyApi.getNewReleases({ limit : 5, offset: 0, country: 'US' }))\r\n    this.setState({newReleasesPromise: newReleases}, () => {\r\n      newReleases.promise.then((data) => {\r\n        this.setState({newReleases: data.albums.items});\r\n        return data;\r\n      }, function(err) {\r\n        console.log(\"Something went wrong!\", err);\r\n      })\r\n    })\r\n  }\r\n  \r\n  getRecentSongs(){\r\n    let recentSongs = makeCancellable(spotifyApi.getMyRecentlyPlayedTracks({ limit: 5 }))\r\n    this.setState({recentSongsPromise: recentSongs}, () => {\r\n      recentSongs.promise.then((data) => {\r\n        this.setState({\r\n          recentlyPlayed: data.items\r\n        });\r\n        return data;\r\n      }, function(err) {\r\n        console.log(\"Something went wrong!\", err);\r\n      })\r\n    })\r\n  }\r\n\r\n  getTopTracks(){\r\n    let topTracks = makeCancellable(spotifyApi.getMyTopTracks({ limit: 5 }))\r\n    this.setState({topTracksPromise: topTracks}, () => {\r\n      topTracks.promise.then((data) => {\r\n        this.setState({\r\n          topTracks: data.items\r\n        });\r\n        return data;\r\n      }, function(err) {\r\n        console.log(\"Something went wrong!\", err);\r\n      })\r\n    })\r\n  }\r\n\r\n  searchTracks(keyword){\r\n    let tracks = makeCancellable(spotifyApi.searchTracks(keyword))\r\n    this.setState({searchTracksPromise: tracks})\r\n\r\n    tracks.promise.then((data) => {\r\n      this.setState({searchedTracks: data});\r\n      return data;\r\n    }, function(err) {\r\n      console.error(err);\r\n    });\r\n  }\r\n\r\n  searchAlbums(keyword){\r\n    let albums = makeCancellable(spotifyApi.searchAlbums(keyword))\r\n    this.setState({searchAlbumsPromise: albums})\r\n\r\n    albums.promise.then((data) => {\r\n      this.setState({searchedAlbums: data});\r\n      return data;\r\n    }, function(err) {\r\n      console.error(err);\r\n    });\r\n  }\r\n\r\n  searchArtists(keyword){\r\n    let artists = makeCancellable(spotifyApi.searchArtists(keyword))\r\n    this.setState({searchArtistsPromise: artists})\r\n\r\n    artists.promise.then((data) => {\r\n      this.setState({searchedArtists: data});\r\n      return data;\r\n    }, function(err) {\r\n      console.error(err);\r\n    });\r\n  }\r\n\r\n  searchPlaylists(keyword){\r\n    let playlists = makeCancellable(spotifyApi.searchPlaylists(keyword))\r\n    this.setState({searchPlaylistsPromise: playlists})\r\n    \r\n    playlists.promise.then((data) => {\r\n      this.setState({searchedPlaylists: data});\r\n      return data;\r\n    }, function(err) {\r\n      console.error(err);\r\n    });\r\n  }\r\n\r\n  handleSearchChange = (e, { value }) => {\r\n    this.setState({ value })\r\n\r\n    setTimeout(() => {\r\n      if (this.state.value.length < 1) return this.setState({value: '', results: []})\r\n\r\n      switch(this.state.searchButton) {\r\n        case 'songs':\r\n          this.searchTracks(value)\r\n          this.setState({\r\n            results: (this.state.searchedTracks !== [] && this.state.searchedTracks.tracks && this.state.searchedTracks.tracks.items) ? this.state.searchedTracks.tracks.items : []\r\n          })\r\n          break;\r\n\r\n        case 'artists':\r\n          this.searchArtists(value)\r\n          this.setState({\r\n            results: (this.state.searchedArtists !== [] && this.state.searchedArtists.artists && this.state.searchedArtists.artists.items) ? this.state.searchedArtists.artists.items : []\r\n          })\r\n          break;\r\n          \r\n        case 'albums':\r\n          this.searchAlbums(value)\r\n          this.setState({\r\n            results: (this.state.searchedAlbums !== [] && this.state.searchedAlbums.albums && this.state.searchedAlbums.albums.items) ? this.state.searchedAlbums.albums.items : []\r\n          })\r\n          break;\r\n\r\n        case 'playlists':\r\n          this.searchPlaylists(value)\r\n          this.setState({\r\n            results: (this.state.searchedPlaylists !== [] && this.state.searchedPlaylists.playlists && this.state.searchedPlaylists.playlists.items) ? this.state.searchedPlaylists.playlists.items : []\r\n          })\r\n          break;\r\n\r\n        default:\r\n          this.setState({\r\n            results: []\r\n          }) \r\n          break;\r\n      }\r\n    }, 20)\r\n\r\n  }\r\n\r\n  checkForPlayer() {\r\n    const { _token } = this.state;\r\n  \r\n    if (window.Spotify !== null) {\r\n      \r\n      clearInterval(this.playerCheckInterval);\r\n\r\n      this.player = new window.Spotify.Player({\r\n        name: \"Runtime Terror's Spotify Player\",\r\n        getOAuthToken: cb => { cb(_token); },\r\n      });\r\n      this.createEventHandlers();\r\n  \r\n      this.player.connect();\r\n      const player_connected = true;\r\n      this.setState({player_connected});\r\n    }\r\n  }\r\n\r\n  checkForPlayer_driver(){\r\n    this.playerCheckInterval = setInterval(() => this.checkForPlayer(), 10);\r\n  }\r\n\r\n  createEventHandlers() {\r\n    this.player.on('initialization_error', e => { console.error(e); });\r\n    this.player.on('authentication_error', e => {\r\n      console.error(e);\r\n      this.setState({ loggedIn: false });\r\n    });\r\n    this.player.on('account_error', e => { console.error(e); });\r\n    this.player.on('playback_error', e => { console.error(e); });\r\n  \r\n    // Playback status updates  \r\n    this.player.on('player_state_changed', state => this.onStateChanged(state));\r\n    // Ready\r\n    this.player.on('ready', async data => {\r\n      let { device_id } = data;\r\n      console.log(\"Let the music play on!\");\r\n      this.setState({ deviceId: device_id });\r\n      this.transferPlaybackHere();\r\n    });\r\n  }\r\n\r\n  onStateChanged(state) {\r\n    // if we're no longer listening to music, we'll get a null state.\r\n    if (state !== null) {\r\n      const {\r\n        current_track: currentTrack,\r\n        position,\r\n        duration,\r\n      } = state.track_window;\r\n\r\n      const trackName = currentTrack.name\r\n      const trackUrl = \"https://open.spotify.com/track/\" + currentTrack.id\r\n      const albumName = currentTrack.album.name\r\n      const artistName = currentTrack.artists\r\n        .map(artist => artist.name)\r\n        .join(\", \");\r\n      const playing = !state.paused;\r\n      const albumArt = currentTrack.album.images[0].url;\r\n      this.setState({\r\n        position,\r\n        duration,\r\n        trackName,\r\n        trackUrl: trackUrl,\r\n        albumName,\r\n        artistName,\r\n        playing,\r\n        albumArt,\r\n      })\r\n    }\r\n  }\r\n\r\n  onPrevClick = () => {\r\n    if(this.state.player_connected){\r\n      this.player.previousTrack();\r\n    }\r\n  }\r\n  \r\n  onPlayClick = () => {\r\n    if(this.state.player_connected){\r\n      this.player.togglePlay();\r\n    }\r\n  }\r\n  \r\n  onNextClick = () => {\r\n    if(this.state.player_connected){\r\n      this.player.nextTrack();\r\n    }\r\n  }\r\n  \r\n  transferPlaybackHere() {\r\n    const { deviceId, _token } = this.state;\r\n    fetch(\"https://api.spotify.com/v1/me/player\", {\r\n      method: \"PUT\",\r\n      headers: {\r\n        authorization: `Bearer ${_token}`,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        \"device_ids\": [ deviceId ],\r\n        \"play\": false,\r\n      }),\r\n    });\r\n  }\r\n\r\n  createPost = () => { \r\n    if (this.state.trackUrl === undefined) {\r\n      window.location.href = base_url + \"/createpost/#SongName=\" + this.state.trackName\r\n    }\r\n    else {\r\n      window.location.href = base_url + \"/createpost/#SongName=\" + this.state.trackName + \"&SongUrl=\" + this.state.trackUrl\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { value, results, recentlyPlayed, topTracks, newReleases, trackName, artistName, albumName, albumArt, playing, _token, deviceId, account_type, player_connected } = this.state\r\n\r\n    let searchResults = []\r\n    let newAlbums = []\r\n    const recents = []\r\n    const top = []\r\n    let i;\r\n\r\n    if (results !== 'undefined') {\r\n      for (i = 0; i < Math.min(results.length, 5); i++) {\r\n        let title = results[i].name\r\n        let artist = results[i].type === 'track' ? results[i].artists[0].name : results[i].type === 'playlist' ? results[i].owner.display_name : results[i].type === 'album' ? results[i].artists[0].name : ''\r\n        let album = results[i].type === 'track' ? results[i].album.name : ''\r\n        let art_url = results[i].type === 'artist' || results[i].type === 'playlist' || results[i].type === 'album' ? (results[i].images.length > 0 ? results[i].images[0].url : '') : results[i].album.images[0].url\r\n        let url = results[i].external_urls.spotify\r\n        let access_token = _token\r\n        let uri = results[i].uri\r\n        let deviceid = deviceId\r\n        let type = results[i].type\r\n        let create_url = base_url + \"/createpost/#SongName=\" + title + \"&SongUrl=\" + url\r\n        searchResults.push(new SongInfo(title, artist, album, art_url, url, create_url, access_token, uri, deviceid, type, account_type, player_connected))\r\n      }\r\n    } \r\n\r\n    if (recentlyPlayed !== 'undefined') {\r\n      for (i = 0; i < Math.min(recentlyPlayed.length, 5); i++) {\r\n        let title = recentlyPlayed[i].track.name\r\n        let artist = recentlyPlayed[i].track.artists[0].name\r\n        let album = recentlyPlayed[i].track.album.name\r\n        let art_url = recentlyPlayed[i].track.album.images[0].url\r\n        let url = recentlyPlayed[i].track.external_urls.spotify\r\n        let access_token = _token\r\n        let uri = recentlyPlayed[i].track.uri\r\n        let deviceid = deviceId\r\n        let type = recentlyPlayed[i].track.type\r\n        let create_url = base_url + \"/createpost/#SongName=\" + title + \"&SongUrl=\" + url\r\n        recents.push(new SongInfo(title, artist, album, art_url, url, create_url, access_token, uri, deviceid, type, account_type, player_connected))\r\n      }\r\n    }\r\n\r\n    if (topTracks !== 'undefined') {\r\n    for (i = 0; i < Math.min(topTracks.length, 5); i++) {\r\n        let title = topTracks[i].name\r\n        let artist = topTracks[i].artists[0].name\r\n        let album = topTracks[i].album.name\r\n        let art_url = topTracks[i].album.images[0].url\r\n        let url = topTracks[i].external_urls.spotify\r\n        let access_token = _token\r\n        let uri = topTracks[i].uri\r\n        let deviceid = deviceId\r\n        let type = topTracks[i].type\r\n        let create_url = base_url + \"/createpost/#SongName=\" + title + \"&SongUrl=\" + url\r\n        top.push(new SongInfo(title, artist, album, art_url, url, create_url, access_token, uri, deviceid, type, account_type, player_connected))\r\n      }\r\n    }\r\n\r\n    if (newReleases !== 'undefined') {\r\n      for (i = 0; i < Math.min(newReleases.length, 5); i++) {\r\n        let title = newReleases[i].name\r\n        let artist = newReleases[i].artists[0].name\r\n        let art_url = newReleases[i].images[0].url\r\n        let url = newReleases[i].external_urls.spotify\r\n        let access_token = _token\r\n        let uri = newReleases[i].uri\r\n        let deviceid = deviceId\r\n        let type = newReleases[i].type\r\n        let create_url = base_url + \"/createpost/#SongName=\" + title + \"&SongUrl=\" + url\r\n        newAlbums.push(new SongInfo(title, artist, \"\", art_url, url, create_url, access_token, uri, deviceid, type, account_type, player_connected))\r\n      }\r\n    }\r\n\r\n    let player =\r\n      <Menu.Item>\r\n        <Grid>\r\n          <Button key={0} inverted icon='backward' onClick={this.onPrevClick}></Button>\r\n          <Button key={1} inverted icon={(playing) ? 'pause' : 'play'} onClick={this.onPlayClick}></Button>\r\n          <Button key={2} inverted icon='forward' onClick={this.onNextClick}></Button>\r\n          <Popup key={3} trigger={<Menu.Item>{trackName}</Menu.Item>} position='bottom center'>\r\n          <Popup.Content>\r\n            <Card centered raised>\r\n            <Card.Content>\r\n                <Card.Header>{trackName}</Card.Header>\r\n                <Card.Meta>{albumName + ' - ' + artistName}</Card.Meta>\r\n                <Image src={albumArt}/>\r\n            </Card.Content>\r\n            </Card>\r\n          </Popup.Content>\r\n          </Popup>\r\n          <Popup key={4} trigger={<Button inverted icon='plus' onClick={this.createPost}/>} position='bottom center'>\r\n            <Popup.Content>\r\n              Create post\r\n            </Popup.Content>\r\n          </Popup>\r\n        </Grid>\r\n      </Menu.Item>\r\n    return (\r\n      <div className='Discover'>\r\n        { // Top bar for player\r\n          <Menu inverted>\r\n            { this.state.account_type === 'premium' ? // Show Player only if User is Premium on Spotify\r\n            (this.state.loggedIn && !(this.state.player_connected && trackName !== undefined)) ? // Show \"button\" when logged in and either we have not started the web player, or the webplayer hasn't loaded yet (checked based on song name)\r\n              <Menu.Item onClick={() => this.checkForPlayer_driver()}>\r\n                Launch Web Player\r\n              </Menu.Item>\r\n              :\r\n              player : null\r\n          }\r\n\r\n\r\n            <Menu.Item position='right' onClick={()=>console.log()}>\r\n              <Grid centered>\r\n                <Search fluid\r\n                  showNoResults={false}\r\n                  size='large'\r\n                  onSearchChange={_.debounce(this.handleSearchChange, 20)}\r\n                  value={value}\r\n                  placeholder={'Search for ' + this.state.searchButton + '...'}\r\n                  />\r\n                <Button.Group labeled>\r\n                  <Button positive={this.state.searchButton === 'songs'} secondary content='Song' onClick={() => this.setState({value: '', results: [], searchButton: 'songs'})} />\r\n                  <Button positive={this.state.searchButton === 'artists'} secondary content='Artist' onClick={() => this.setState({value: '', results: [], searchButton: 'artists'})} />\r\n                  <Button positive={this.state.searchButton === 'albums'} secondary content='Album' onClick={() => this.setState({value: '', results: [], searchButton: 'albums'})} />\r\n                  <Button positive={this.state.searchButton === 'playlists'} secondary content='Playlist' onClick={() => this.setState({value: '', results: [], searchButton: 'playlists'})} />\r\n                </Button.Group>\r\n              </Grid>\r\n            </Menu.Item>\r\n\r\n            { this.state.loggedIn ?\r\n              <Menu.Item href={spotifyUrl}>\r\n                Spotify Status: <p style={{color: (this.state.account_type === 'premium') ? 'gold' : 'green', whiteSpace: 'pre'}}> {this.state.account_type.charAt(0).toUpperCase() + this.state.account_type.slice(1)} </p>\r\n              </Menu.Item> :\r\n              <Menu.Item href={spotifyUrl}>\r\n                Sign In To Spotify  \r\n              </Menu.Item>\r\n            }\r\n          </Menu>\r\n        }\r\n\r\n        {!this.state.loggedIn && this.state._token === '' ? <p align='center' style={{color: '#139bd1', fontSize: '26px'}}>Welcome! <br /> Please log into Spotify to get started.</p> : null}\r\n\r\n        {(searchResults.length !== 0) ? \r\n          <SongSection\r\n          title='Search Results'\r\n          song_info={searchResults}\r\n          expand={this.expandSection}\r\n        /> : null\r\n        }\r\n\r\n        {(recents.length !== 0) ?\r\n        <SongSection\r\n          title='Recent Songs'\r\n          song_info={recents}\r\n        /> : null\r\n        }\r\n\r\n        {(top.length !== 0) ?\r\n        <SongSection\r\n          title='Your Top Picks'\r\n          song_info={top}\r\n        /> : null\r\n        }\r\n        \r\n        {(newAlbums.length !== 0) ?\r\n        <SongSection\r\n          title='New Releases'\r\n          song_info={newAlbums}\r\n        /> : null\r\n        }\r\n        <br/>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nclass SongSection extends Component {\r\n  render() {\r\n    const {title, song_info} = this.props\r\n\r\n    return (\r\n      <div>\r\n        <br/>\r\n          <Container fluid>\r\n            <Header as='h2' textAlign='center'>{title}</Header>\r\n            <Divider/>\r\n            <SongGrid song_info={song_info}/>\r\n            <Divider hidden/>\r\n            <Divider hidden/>\r\n          </Container>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    profile: state.firebase.profile\r\n  }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(Discover)\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Button, Form, ButtonContent, Icon } from 'semantic-ui-react'\r\nimport { signUp } from '../../../store/actions/authActions'\r\n\r\n\r\nclass SignUp extends Component {\r\n    state = {\r\n        email: '',\r\n        password: '',\r\n        name: ''\r\n    }\r\n\r\n    submit = () => {\r\n        this.props.signUp(this.state)\r\n    }\r\n\r\n    change = (e) => {\r\n        this.setState({\r\n            [e.target.id]: e.target.value\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const { authError } = this.props\r\n        return (\r\n            <Form onSubmit={this.submit}>\r\n                <Form.Field>\r\n                    <Form.Input label='Email' id='email' placeholder='Enter your email' onChange={this.change}/>\r\n                </Form.Field>\r\n                <Form.Field>\r\n                    <Form.Input label='Password' id='password' placeholder='Enter your password' type='password' onChange={this.change}/>\r\n                </Form.Field>\r\n                <Form.Field>\r\n                    <Form.Input label='Name' id='name' placeholder='Enter your name' onChange={this.change}/>\r\n                </Form.Field>\r\n                {authError ? <p style={{color: 'red'}}>{authError}</p> : null}\r\n                <Form.Field control={Button}>\r\n                    <ButtonContent>\r\n                        <Icon name='headphones'/>\r\n                        Sign Up\r\n                    </ButtonContent>\r\n                </Form.Field>\r\n            </Form>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n      authError: state.auth.authError\r\n    }\r\n  }\r\n  \r\n  \r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        signUp: (newUser) => dispatch(signUp(newUser))\r\n    }\r\n}\r\n  \r\n  \r\nexport default connect(mapStateToProps, mapDispatchToProps)(SignUp)\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Button, Form, ButtonContent, Icon } from 'semantic-ui-react'\r\nimport { signIn } from '../../../store/actions/authActions'\r\n\r\n\r\nclass SignIn extends Component {\r\n    state = {\r\n        email: '',\r\n        password: ''\r\n    }\r\n\r\n    submit = () => {\r\n        this.props.signIn(this.state)\r\n    }\r\n\r\n    change = (e) => {\r\n        this.setState({\r\n            [e.target.id]: e.target.value\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const { authError } = this.props\r\n        return (\r\n            <Form onSubmit={this.submit}>\r\n                <Form.Field>\r\n                    <Form.Input label='Email' id='email' placeholder='Enter your email' onChange={this.change}/>\r\n                </Form.Field>\r\n                <Form.Field>\r\n                    <Form.Input label='Password' id='password' placeholder='Enter your password' type='password' onChange={this.change}/>\r\n                </Form.Field>\r\n                {authError ? <p style={{color: 'red'}}>{authError}</p> : null}\r\n                <Form.Field control={Button} fluid>\r\n                    <ButtonContent>\r\n                        <Icon name='headphones'/>\r\n                        Sign In\r\n                    </ButtonContent>\r\n                </Form.Field>\r\n            </Form>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        authError: state.auth.authError\r\n    }\r\n}\r\n  \r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        signIn: (creds) => dispatch(signIn(creds))\r\n    }\r\n}\r\n  \r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SignIn)\r\n","import React, { Component } from 'react'\r\nimport { Button, ButtonContent, Icon, Segment } from 'semantic-ui-react'\r\nimport SignUp from './signup'\r\nimport SignIn from './signin'\r\n\r\n\r\n// TODO: A lot of code overlap with SignUp/SignIn. Refactor into one class\r\nclass LoginForm extends Component {\r\n    state = {\r\n        signing_up: false\r\n    }\r\n\r\n    sign_up = (word) => {\r\n        this.setState( {signing_up: word})\r\n    }\r\n\r\n    render() {\r\n        const signing_area = this.state.signing_up ? <SignUp/> : <SignIn/>\r\n        return (\r\n            <div>\r\n                <Button.Group>\r\n                    <Button color='yellow' onClick={() => {this.sign_up(true)}}>\r\n                        <ButtonContent>\r\n                            <Icon name='plus'/>\r\n                            Sign Up\r\n                        </ButtonContent>\r\n                    </Button>\r\n                    <Button.Or/>\r\n                    <Button color='yellow' onClick={() => {this.sign_up(false)}}>\r\n                        <ButtonContent>\r\n                        <Icon name='music'/>\r\n                            Sign In\r\n                        </ButtonContent>\r\n                    </Button>\r\n                </Button.Group>\r\n                <Segment>\r\n                    {signing_area}\r\n                </Segment>\r\n                </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default LoginForm\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Redirect } from 'react-router-dom'\r\nimport { Image, Grid, GridRow } from 'semantic-ui-react'\r\nimport LoginForm from './loginForm'\r\n\r\n\r\nconst path = process.env.NODE_ENV === \"production\" ? '' : '/';\r\n\r\n\r\nclass Login extends Component {\r\n\r\n    render() {\r\n        const { auth } = this.props\r\n        if (auth.isLoaded && auth.uid) {\r\n            return <Redirect to='/'/>\r\n        }\r\n        else {\r\n            return (\r\n                <Grid padded centered>\r\n                    <Image src={path + \"img/silhouette_2.png\"}/>\r\n                    <GridRow> <LoginForm/> </GridRow>\r\n                </Grid>\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n      auth: state.firebase.auth\r\n    }\r\n  }\r\n  \r\n\r\nexport default connect(mapStateToProps)(Login)\r\n","import React from 'react';\r\nimport moment from 'moment';\r\nimport { Feed, Divider } from 'semantic-ui-react'\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\nconst PostSummary = ({post, users}) => {\r\n  const user = users && post ? users.filter(user => user.id === post.authorId)[0] : null\r\n\r\n  const summary = \r\n    <div>\r\n      <Link to={'/profile/' + post.authorId}> {post.author} </Link>\r\n      rated song <b><a href={post.url ? post.url : null}> {post.song} </a></b>\r\n      <span className={\"fa fa-star \" + (post.rating >= 1 ? 'star_checked' : '')}></span>\r\n      <span className={\"fa fa-star \" + (post.rating >= 2 ? 'star_checked' : '')}></span>\r\n      <span className={\"fa fa-star \" + (post.rating >= 3 ? 'star_checked' : '')}></span>\r\n      <span className={\"fa fa-star \" + (post.rating >= 4 ? 'star_checked' : '')}></span>\r\n      <span className={\"fa fa-star \" + (post.rating >= 5 ? 'star_checked' : '')}></span> \r\n    </div>\r\n  \r\n\r\n  return (\r\n\r\n    user && post ?\r\n    <div>\r\n      <Feed size='large'>\r\n        <Feed.Event\r\n          image={user.imageUrl}\r\n          date={moment(post.createdAt.toDate()).format('LLLL')}\r\n          summary={summary}\r\n          extraText={post.comment}\r\n        />\r\n      </Feed>\r\n      <Divider />\r\n    </div> : null\r\n  )\r\n}\r\n\r\n\r\nexport default PostSummary;","import React from 'react';\r\nimport PostSummary from './postSummary';\r\n\r\n\r\nconst PostList = ({posts, users}) => {\r\n  return (\r\n    <div>\r\n        {(posts && (posts.length === 0)) ? <h3>No Posts Yet!</h3> : null}\r\n        { posts && posts.map(post => {\r\n          return (\r\n            <PostSummary key={post.id} post={post} users={users} />\r\n          )\r\n        })}\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default PostList;","import React, { Component } from 'react'\r\nimport { Tab, Divider } from 'semantic-ui-react'\r\nimport { compose } from 'redux'\r\nimport { firestoreConnect } from 'react-redux-firebase'\r\nimport { connect } from 'react-redux'\r\nimport PostList from './postList'\r\n\r\nexport class Feed extends Component {\r\n  state = {\r\n    friendsPosts: null,\r\n    explorePosts: null,\r\n    users: null,\r\n  }\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    let newPosts = {}\r\n    if (nextProps.explorePosts !== prevState.explorePosts) {\r\n      Object.assign(newPosts, {explorePosts: nextProps.explorePosts})\r\n    }\r\n    if (nextProps.friendsPosts !== undefined && nextProps.friendsPosts !== prevState.friendsPosts) {\r\n      Object.assign(newPosts, {friendsPosts: nextProps.friendsPosts})\r\n    }\r\n    if (nextProps.users !== undefined && nextProps.users !== prevState.users) {\r\n      Object.assign(newPosts, {users: nextProps.users})\r\n    }\r\n    return (newPosts.length !== 0) ? newPosts : null;\r\n  }\r\n\r\n  render() {\r\n    let feedPanes = [\r\n      { menuItem: 'Friends', render: () => <Tab.Pane><PostList posts={this.state.friendsPosts} users={this.state.users}/></Tab.Pane> },\r\n      { menuItem: 'Explore', render: () => <Tab.Pane><PostList posts={this.state.explorePosts} users={this.state.users}/></Tab.Pane> },\r\n    ]\r\n  \r\n    return (\r\n      <div>\r\n        <Divider hidden />\r\n        <Tab panes={feedPanes}/> \r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  //creates the friends list for us to query\r\n  var currentFriendsList = [\"0\"]; //This is the dummy value\r\n  for(var key in state.firestore.ordered.users)\r\n  {\r\n    if(state.firebase.auth[\"uid\"] === state.firestore.ordered.users[key][\"id\"])\r\n    {\r\n      currentFriendsList = state.firestore.ordered.users[key][\"friends\"];\r\n    }\r\n  }\r\n\r\n  //sort friendsPosts, because the sortBy doesn't work\r\n  if(state.firestore.ordered.friendsPosts != null){\r\n  var sortedFriendsArray = state.firestore.ordered.friendsPosts.sort(function (a, b) {\r\n    return b.createdAt[\"seconds\"] - a.createdAt[\"seconds\"];\r\n  })\r\n  }\r\n\r\n  //This is if we wanted to allow personal private posts to be shown on explore page\r\n  //find a way to combine publicPosts and privatePersonalPosts for the explore page \r\n  // if(state.firestore.ordered.publicPosts != null && state.firestore.ordered.privatePersonalPosts != null){\r\n  // var sortedExploreArray = state.firestore.ordered.publicPosts.concat(state.firestore.ordered.privatePersonalPosts)\r\n  //                                                   .sort(function (a, b) {\r\n  //   return b.createdAt[\"seconds\"] - a.createdAt[\"seconds\"];\r\n  // })\r\n  // }\r\n  if(state.firestore.ordered.publicPosts)\r\n    var sortedExploreArray = state.firestore.ordered.publicPosts.sort(function (a, b) {return b.createdAt[\"seconds\"] - a.createdAt[\"seconds\"];})\r\n\r\n  return {\r\n    explorePosts: sortedExploreArray,\r\n    friendsPosts: sortedFriendsArray,\r\n    auth: state.firebase.auth,\r\n    users: state.firestore.ordered.users,\r\n    currentFriendsList: currentFriendsList\r\n  }\r\n}\r\n\r\n\r\nexport default compose(\r\n  connect(mapStateToProps),\r\n  firestoreConnect(props => [\r\n      { collection: 'users' },\r\n      {\r\n        collection: 'posts',\r\n        storeAs: 'friendsPosts',\r\n        where: ['authorId', 'in', props.currentFriendsList === null || props.currentFriendsList.length === 0 ? ['0'] : props.currentFriendsList]\r\n      },\r\n      { \r\n        collection: 'posts',\r\n        storeAs: 'publicPosts',\r\n        where: ['privacy', '==', 'public'],\r\n      },\r\n      // {\r\n      //   collection: 'posts',\r\n      //   storeAs: 'privatePersonalPosts',\r\n      //   where: [\r\n      //     ['authorId', '==', props.auth[\"uid\"]\r\n      //   ],\r\n      //     ['privacy', '==', 'private']\r\n      //   ]\r\n      // },\r\n  ])\r\n)(Feed);\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { createPost } from '../store/actions/postActions'\r\nimport { Form, Radio, Header, Container, Divider } from 'semantic-ui-react'\r\n\r\n// Semantic-UI\r\n// https://react.semantic-ui.com/\r\n// https://medium.com/@a.carreras.c/using-semantic-ui-react-your-react-js-app-523ddc9abeb3\r\n\r\n\r\nexport class CreatePost extends Component {\r\n\r\n  constructor(props) {\r\n    super();\r\n\r\n    const params = this.getHashParams();\r\n    const songName = params.SongName;\r\n    const songUrl = params.SongUrl;\r\n    \r\n    this.state = {\r\n      song: songName ? songName : '',\r\n      comment: '',\r\n      rating: '',\r\n      url: songUrl ? songUrl : '',\r\n      privacy: props.profile.privacy,\r\n      error: false,\r\n    }\r\n  }\r\n  \r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    if (nextProps.profile && nextProps.profile.isLoaded && nextProps.profile.privacy !== undefined && prevState.privacy === undefined) {\r\n      return {\r\n        privacy: nextProps.profile.privacy\r\n      }\r\n    }\r\n    else {\r\n      return null\r\n    }\r\n  }\r\n\r\n  getHashParams() {\r\n    var hashParams = {};\r\n    var e, r = /([^&;=]+)=?([^&;]*)/g,\r\n        q = window.location.hash.substring(1);\r\n    e = r.exec(q)\r\n    while (e) {\r\n       hashParams[e[1]] = decodeURIComponent(e[2]);\r\n       e = r.exec(q);\r\n    }\r\n    return hashParams;\r\n  }\r\n\r\n  handleChange = (e) => {\r\n    this.setState({\r\n      [e.target.id]: e.target.value\r\n    })\r\n  }\r\n\r\n  handleRating = (e, {value}) => {\r\n    this.setState({\r\n      'rating': value\r\n    })\r\n  }\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    if (this.state.rating) {\r\n      this.props.createPost({\r\n        song: this.state.song,\r\n        comment: this.state.comment,\r\n        rating: this.state.rating,\r\n        privacy: this.state.privacy,\r\n        url: this.state.url\r\n      })\r\n      this.props.history.push('/')\r\n    }\r\n    else {\r\n        this.setState({ error: 'Rating is required!' })\r\n    }\r\n  }\r\n\r\n  toggle = () => {\r\n    this.setState({\r\n      privacy: (this.state.privacy === 'private') ? 'public' : 'private',\r\n    })\r\n  }\r\n\r\n  render() {\r\n\r\n    return (\r\n      <Container text>\r\n        <Divider hidden />\r\n        <Header as='h2'>Create Post</Header>\r\n        <Form onSubmit={this.handleSubmit}>\r\n          <Form.Group widths='equal'>\r\n            <Form.Input\r\n              id='song'\r\n              label='Song'\r\n              name='Song'\r\n              required={this.state.song ? false : true}\r\n              readOnly={this.state.url ? true : false}\r\n              placeholder={this.state.song}\r\n              onChange={this.handleChange}\r\n            />\r\n            <Form.Input\r\n              id='url'\r\n              label='URL'\r\n              name='URL'\r\n              readOnly\r\n              disabled={this.state.url ? false : true}\r\n              placeholder={this.state.url}\r\n              onChange={this.handleChange}\r\n            />\r\n          </Form.Group>\r\n          <Form.Field\r\n              control={Radio}\r\n              toggle\r\n              label={this.state.privacy === 'private' ? 'This post will be Private' : 'This post will be Public'}\r\n              defaultChecked={this.state.privacy === 'private'}\r\n              onClick={this.toggle}\r\n            />\r\n          <Form.Dropdown\r\n            id='rating'\r\n            label='Rating'\r\n            placeholder='Select'\r\n            required\r\n            inline\r\n            error={this.state.error}\r\n            onChange={this.handleRating}\r\n            options={\r\n              [\r\n                {text: '1', value: 1},\r\n                {text: '2', value: 2},\r\n                {text: '3', value: 3},\r\n                {text: '4', value: 4},\r\n                {text: '5', value: 5}\r\n              ]\r\n            }\r\n          />\r\n\r\n          <Form.TextArea\r\n            id='comment'\r\n            label='Comment'\r\n            name='Comment'\r\n            onChange={this.handleChange}\r\n          />\r\n          <Form.Button type='submit' color='green'>Create Post</Form.Button>\r\n        </Form>\r\n      </Container>\r\n    )\r\n  }\r\n}\r\n \r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n      profile: state.firebase.profile\r\n  }\r\n}\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    createPost: (Post) => dispatch(createPost(Post))\r\n  }\r\n}\r\n\r\n\r\nexport default  connect(mapStateToProps, mapDispatchToProps)(CreatePost);\r\n","export const createPost = (post) => {\r\n  return (dispatch, getState, { getFirebase, getFirestore }) => {\r\n\r\n    // Make async call to database\r\n    const firestore = getFirestore()\r\n    const profile = getState().firebase.profile\r\n    const authorId = getState().firebase.auth.uid\r\n\r\n    firestore.collection('posts').add({\r\n      ...post, \r\n      author: profile.name,\r\n      authorId: authorId,\r\n      createdAt: new Date()\r\n    }).then(() => {\r\n      dispatch({ type: 'CREATE_POST', post: post })\r\n    }).catch((err) => {\r\n      dispatch({ type: 'CREATE_POST_ERROR', err: err })\r\n    })\r\n  }\r\n}\r\n","import React from 'react';\r\nimport { Feed, Divider } from 'semantic-ui-react'\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\nconst FriendList = ({friends, users}) => {\r\n  return (\r\n    <div>\r\n        {(friends && friends.length === 0) ? <h3>No Friends Yet :(</h3> : null }\r\n        { friends && users && friends.map(friend => {\r\n          const friend_info = users.filter(user => user.id === friend)[0]\r\n          const summary = friend_info ? <Link to={'/profile/' + friend}> {friend_info.name} </Link> : null\r\n          return (\r\n            <Feed key={friend}>\r\n              <Feed.Event\r\n                image={friend_info ? friend_info.imageUrl : null}\r\n                summary={summary}\r\n              />\r\n              <Divider fitted/>\r\n            </Feed>\r\n          )\r\n        })}\r\n        \r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default FriendList;","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport firebase from 'firebase';\r\nimport FileUploader from 'react-firebase-file-uploader';\r\nimport { updateImage } from '../../store/actions/authActions'\r\nimport { Grid, Progress, Header, Image, Button, Modal } from 'semantic-ui-react';\r\n\r\n\r\nclass ModalUploadPicture extends Component {\r\n\r\n  constructor(uId) {\r\n    super()\r\n    this.uId = uId.uId\r\n  }\r\n\r\n  state = {\r\n    image: '',\r\n    isUploading: false,\r\n    progress: 0,\r\n    imageURL: '',\r\n    open: false\r\n  };\r\n\r\n  handleUploadStart = () => {\r\n    this.setState({isUploading: true, progress: 0, imageURL: null, image: null})\r\n  }\r\n  handleProgress = (progress) => this.setState({progress});\r\n  \r\n  handleUploadError = (error) => {\r\n    this.setState({isUploading: false})\r\n    console.error(error);\r\n  }\r\n \r\n  handleUploadSuccess = (filename) => {\r\n    this.setState({image: filename, progress: 100, isUploading: false});\r\n    firebase.storage().ref('profile_images').child(filename).getDownloadURL().then(url => {\r\n        this.setState({imageURL: url})\r\n        this.props.updateImage(this.uId, url)\r\n        this.handleModalClose()\r\n    });\r\n  }\r\n\r\n  handleModalClose = () => {\r\n    this.setState({\r\n      image: '',\r\n      isUploading: false,\r\n      progress: 0,\r\n      imageURL: '',\r\n      open: false\r\n    })\r\n  }\r\n    \r\n  render() {\r\n    const previousImageUrl = this.props.previousImageUrl\r\n\r\n    return (\r\n      <Modal\r\n        trigger={<Image src={previousImageUrl} size='medium' circular bordered/>}\r\n        open={this.state.open}\r\n        onOpen={() => this.setState({open: true})}\r\n        closeOnDimmerClick={false}\r\n        closeOnDocumentClick={false}\r\n        size='small'\r\n      >\r\n        <Modal.Content>                \r\n          <Grid divided stretched centered>\r\n            <Grid.Row stretched>\r\n              <Grid.Column stretched>\r\n                <Header as='h2'>Current</Header>\r\n                <Image src={previousImageUrl} wrapped size='medium' href={previousImageUrl} bordered/>\r\n              </Grid.Column>\r\n            </Grid.Row>\r\n            <Grid.Row stretched>\r\n              <Grid.Column stretched>\r\n              <Grid stretched columns={16}>\r\n                <Grid.Row>\r\n                <Grid.Column width={6}>\r\n                  <FileUploader\r\n                    accept=\"image/*\"\r\n                    name=\"image\"\r\n                    filename={ this.uId }\r\n                    storageRef={firebase.storage().ref('profile_images')}\r\n                    onUploadStart={this.handleUploadStart}\r\n                    onUploadError={this.handleUploadError}\r\n                    onUploadSuccess={this.handleUploadSuccess}\r\n                    onProgress={this.handleProgress}\r\n                    />\r\n                  </Grid.Column>\r\n                  <Grid.Column width={10}>\r\n                    {\r\n\r\n                      (this.state.imageURL) ? <Progress percent={100} success>Uploaded</Progress> :\r\n                        this.state.isUploading ?\r\n                          <Progress percent={this.state.progress} progress color='blue'/> :\r\n                          null\r\n                    }\r\n                  </Grid.Column>\r\n                  </Grid.Row>\r\n                </Grid>\r\n              </Grid.Column>\r\n            </Grid.Row>\r\n          </Grid>\r\n        </Modal.Content>\r\n        <Modal.Actions>\r\n          <Button color='red' onClick={() => {this.setState({open: false})}}>Cancel</Button>\r\n        </Modal.Actions>\r\n      </Modal>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    updateImage: (uId, imageUrl) => dispatch(updateImage(uId, imageUrl))\r\n  }\r\n}\r\n\r\n\r\nexport default connect(null, mapDispatchToProps)(ModalUploadPicture)\r\n","import React, { Component } from 'react'\r\nimport { compose } from 'redux';\r\nimport { connect } from 'react-redux';\r\nimport { firestoreConnect } from 'react-redux-firebase';\r\nimport { Redirect } from 'react-router-dom'\r\nimport { Grid, GridRow, Image, Button, Segment, Tab, GridColumn, Label, Modal, Form } from 'semantic-ui-react'\r\nimport { addFriend, removeFriend, acceptFriend } from '../../store/actions/authActions'\r\nimport CreatePost from '../createPost';\r\nimport PostList from '../feed/postList'\r\nimport FriendList from './friendList'\r\nimport UploadPicture from './modalUploadPicture';\r\nimport { updateProfile } from '../../store/actions/authActions'\r\n\r\nexport class Profile extends Component {\r\n\r\n  state = {\r\n    posts_content: null,\r\n    friends_content: null,\r\n    navigate: null,\r\n    open: false,\r\n    name: '',\r\n    privacy: null,\r\n    profile: null\r\n  }\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    let data = {}\r\n    if ((prevState.profile === null || prevState.profile.isLoading) && nextProps.profile) {\r\n      if (nextProps.profile.privacy !== undefined) {\r\n        Object.assign(data,\r\n          {\r\n            privacy: nextProps.profile.privacy,\r\n            profile: nextProps.profile\r\n          }\r\n        )\r\n      }\r\n\r\n      if (nextProps.profile.name !== undefined) {\r\n        Object.assign(data,\r\n          {\r\n            name: nextProps.profile.name\r\n          }\r\n        )\r\n      }\r\n    }\r\n    return data\r\n  }\r\n\r\n  navigate = (destination) => {\r\n    this.setState({\r\n      navigate: destination\r\n    })\r\n  }\r\n\r\n  handleChange = (e) => {\r\n    this.setState({\r\n      [e.target.id]: e.target.value\r\n    })\r\n  }\r\n\r\n  handleSubmit = (e) => {\r\n    this.handleSubmitPrivacy(e, this.state.privacy)\r\n  }\r\n\r\n  handleSubmitPrivacy = (e, privacy) => {\r\n    e.preventDefault()\r\n    this.props.updateProfile(this.props.auth.uid, {name: this.state.name, privacy: privacy, profile: this.state.profile})\r\n    this.props.history.push('/profile/' + this.props.auth.uid)\r\n    this.setState({open: false})\r\n  }\r\n\r\n  togglePrivacy = (e) => {\r\n    let new_privacy = (this.state.privacy === 'private') ? 'public' : 'private'\r\n    this.setState({\r\n      privacy: new_privacy\r\n    })\r\n    this.handleSubmitPrivacy(e, new_privacy)\r\n  }\r\n\r\n  render() {\r\n    const { auth, users, profile, match, curProfilePosts, currentFriendsList} = this.props;\r\n    const curProfileUser = users && auth ? users.filter(user => user.id === match.params.id)[0] : null\r\n    const imageUrl = curProfileUser ? curProfileUser.imageUrl : null\r\n    \r\n    const isUser = auth.uid && match.params && auth.uid === match.params.id;\r\n\r\n    let friendButton = match && auth ? <Button onClick={() => {this.props.addFriend(match.params.id, auth.uid)}}>Add Friend</Button> : null\r\n    if (auth && curProfileUser && curProfileUser.friends_pending && curProfileUser.friends_pending.includes(auth.uid))\r\n      friendButton = <Button>Friend Request Sent</Button>\r\n    else if (auth && curProfileUser && curProfileUser.friends.includes(auth.uid) && match)\r\n      friendButton = <Button onClick={() => {this.props.removeFriend(match.params.id, auth.uid)}}>Remove Friend</Button>\r\n    else if (profile && profile.friends_pending && auth && match && profile.friends_pending.includes(match.params.id))\r\n      friendButton = <Button onClick={() => {this.props.acceptFriend(match.params.id, auth.uid)}}>Accept Friend Request</Button>\r\n    \r\n      \r\n    let posts_content = <div> <PostList posts={curProfilePosts} users={users} /> </div>\r\n    let friends_content = curProfileUser ? \r\n          ((currentFriendsList && match && match.params && match.params.id && currentFriendsList.includes(match.params.id)) \r\n            || (auth && match && match.params && match.params.id && auth[\"uid\"] === match.params.id) ? \r\n            <div> <FriendList users={users} friends={curProfileUser.friends} /> </div> :\r\n            <div> <FriendList users={users} friends={[]} /> </div>)\r\n             : null\r\n\r\n    let profile_panes = [\r\n    {\r\n      menuItem: 'Posts',\r\n      render: () => <Tab.Pane>{posts_content}</Tab.Pane>\r\n    },\r\n    {\r\n      menuItem: 'Friends',\r\n      render: () => <Tab.Pane>{friends_content}</Tab.Pane>\r\n    }\r\n  ]\r\n\r\n    if (this.state.navigate === '/createpost') {\r\n      return (\r\n        <div><Redirect to={this.state.navigate}/><CreatePost/></div>\r\n      )\r\n    }\r\n\r\n    \r\n    return (\r\n      <div>\r\n        <Grid centered padded='vertically'>\r\n          <GridRow>\r\n            <Segment>\r\n              { isUser ?\r\n                <UploadPicture uId={auth.uid} previousImageUrl={imageUrl} /> :\r\n                <Image src={imageUrl} size='medium' circular bordered/>\r\n              }\r\n              <br/>\r\n              <Button as='div' labelPosition='left'>\r\n                <Label basic>\r\n                  {curProfileUser ? curProfileUser.name : null }\r\n                </Label>\r\n                { isUser ?\r\n                <Modal\r\n                  trigger={<Button compact icon='edit'/>}\r\n                  open={this.state.open}\r\n                  onOpen={() => this.setState({open: true})}\r\n                  closeOnDimmerClick={false}\r\n                  closeOnDocumentClick={false}\r\n                  size='small'\r\n                  >\r\n                    <Modal.Content>\r\n                      <Form onSubmit={this.handleSubmit}>\r\n                        <Form.Field>\r\n                          <label>New Name</label>\r\n                          <Form.Input id='name' onChange={this.handleChange} placeholder={curProfileUser ? curProfileUser.name : ''}/>\r\n                        </Form.Field>\r\n                        <Button type='submit' color='green'>Change name</Button>\r\n                        <Button floated='right' color='red'  onClick={() => this.setState({open: false})}>Cancel</Button>\r\n                      </Form>\r\n                    </Modal.Content>\r\n                  </Modal>\r\n                : null\r\n                }\r\n              </Button>\r\n\r\n              { isUser ?  // If the current profile is logged in user's profile\r\n                <div>\r\n                  <Grid>\r\n                    <Grid.Column floated='left'>\r\n                      <Button onClick={this.togglePrivacy} basic size='small' color={(this.state.privacy === 'private') ? 'red' : 'green'}>{(this.state.privacy === 'private') ? 'Private' : 'Public'}</Button>\r\n                    </Grid.Column>\r\n                    <Grid.Column floated='right'>\r\n                      <Button floated='right' icon='plus' onClick={() => {this.navigate('/createpost')}}/>\r\n                    </Grid.Column>\r\n                  </Grid>\r\n                </div> :\r\n                  friendButton\r\n              }\r\n            </Segment>\r\n          </GridRow>\r\n          <GridRow> <GridColumn width={16}> <Tab panes={profile_panes}/> </GridColumn> </GridRow>\r\n        </Grid>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if (this.state.navigate != null)\r\n      this.navigate(null)\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    //creates the friends list for the current user\r\n    let currentFriendsList = [\"0\"]; //This is the dummy value\r\n    for(let key in state.firestore.ordered.users)\r\n    {\r\n      if(state.firebase.auth[\"uid\"] === state.firestore.ordered.users[key][\"id\"])\r\n      {\r\n        currentFriendsList = state.firestore.ordered.users[key][\"friends\"];\r\n      }\r\n    }\r\n    \r\n    //This creates the posts on the profile that we are looking at\r\n    let curProfilePosts = [];\r\n    if(state.firestore.ordered.curPrivatePosts != null && state.firestore.ordered.curPublicPosts != null){\r\n      curProfilePosts = state.firestore.ordered.curPrivatePosts.concat(state.firestore.ordered.curPublicPosts).sort(function (a, b) {\r\n        return b.createdAt[\"seconds\"] - a.createdAt[\"seconds\"];\r\n    })\r\n    }\r\n    else if(state.firestore.ordered.curPublicPosts != null){\r\n      curProfilePosts = state.firestore.ordered.publicPosts;\r\n    }\r\n    else if(state.firestore.ordered.curPrivatePosts != null){\r\n      curProfilePosts = state.firestore.ordered.curPrivatePosts;\r\n    }\r\n\r\n  return {\r\n    curProfilePosts: curProfilePosts,\r\n    auth: state.firebase.auth,\r\n    profile: state.firebase.profile,\r\n    users: state.firestore.ordered.users,\r\n    currentFriendsList: currentFriendsList\r\n  }\r\n}\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    addFriend: (profile_user_id, logged_in_user_id) => dispatch(addFriend(profile_user_id, logged_in_user_id)),\r\n    removeFriend: (profile_user_id, logged_in_user_id) => dispatch(removeFriend(profile_user_id, logged_in_user_id)),\r\n    acceptFriend: (friend_user_id, logged_in_user_id) => dispatch(acceptFriend(friend_user_id, logged_in_user_id)),\r\n    updateProfile: (uId, newInfo) => dispatch(updateProfile(uId, newInfo))\r\n  }\r\n}\r\n\r\n\r\nexport default compose(\r\n  connect(mapStateToProps, mapDispatchToProps),\r\n  firestoreConnect(props => [\r\n    { collection: 'users' },\r\n      { \r\n      collection: 'posts',\r\n      storeAs: 'curPrivatePosts',\r\n      where: [\r\n        ['authorId', '==', props.match.params.id],\r\n        [\r\n        'privacy', '==', \r\n        //get the private posts if they are friends OR they are the current user\r\n        //Otherwise we can only see their public posts\r\n        props.currentFriendsList === null || (props.match.params.id !== props.auth[\"uid\"] && !props.currentFriendsList.includes(props.match.params.id))?\r\n        '0':'private'\r\n        ],\r\n      ],\r\n     },\r\n     { \r\n      collection: 'posts',\r\n      storeAs: 'curPublicPosts',\r\n      where: [\r\n      //Alway just get the public posts, and we will add them together and sort them by their start time\r\n        ['authorId', '==', props.match.params.id],\r\n        ['privacy', '==','public'],\r\n      ],\r\n     },\r\n      \r\n  ])\r\n)(Profile);\r\n","import React, { Component } from 'react'\r\nimport { compose } from 'redux';\r\nimport { connect } from 'react-redux';\r\nimport { firestoreConnect } from 'react-redux-firebase';\r\nimport { Divider, Container, List, Image, Icon } from 'semantic-ui-react'\r\nimport { Link } from 'react-router-dom';\r\nimport { acceptFriend, rejectFriend } from '../../store/actions/authActions'\r\n\r\n\r\nexport class PendingList extends Component {\r\n\r\n  render() {\r\n\r\n    const { auth, users, profile, acceptFriend, rejectFriend } = this.props\r\n    const friend_requests = profile ? profile.friends_pending : null\r\n\r\n    return (\r\n      <div>\r\n        <Container text>\r\n          <Divider hidden />\r\n          {(friend_requests && friend_requests.length === 0) ? <h3>No Friends Requests</h3> : null }\r\n          { friend_requests && users && friend_requests.map(friend => {\r\n            const user_info = users.filter(user => user.id === friend)[0]\r\n            const summary = user_info ? <Link to={'/profile/' + friend}> {user_info.name} </Link> : null\r\n            \r\n            return (\r\n              <List divided animated relaxed verticalAlign='middle' size='big' key={friend}>\r\n                <List.Item>\r\n                  <Image avatar src={user_info ? user_info.imageUrl : null} />\r\n                  <List.Content> <List.Header>{summary}</List.Header> </List.Content>\r\n                  <List.Content floated='right'>\r\n                    <List.Description as='a' onClick={() => acceptFriend(friend, auth.uid)}>\r\n                      <Icon name='check' color='green'/>Accept\r\n                    </List.Description>\r\n                    <List.Description as='a' onClick={() => rejectFriend(friend, auth.uid)}>\r\n                      <Icon name='close' color='red'/>Reject\r\n                    </List.Description>\r\n                  </List.Content>\r\n                </List.Item>\r\n                <Divider/>\r\n              </List>\r\n            )\r\n          })}\r\n        </Container>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    auth: state.firebase.auth,\r\n    profile: state.firebase.profile,\r\n    users: state.firestore.ordered.users\r\n  }\r\n}\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    acceptFriend: (friend_user_id, logged_in_user_id) => dispatch(acceptFriend(friend_user_id, logged_in_user_id)),\r\n    rejectFriend: (friend_user_id, logged_in_user_id) => dispatch(rejectFriend(friend_user_id, logged_in_user_id))\r\n  }\r\n}\r\n\r\n\r\nexport default compose(\r\n  connect(mapStateToProps, mapDispatchToProps),\r\n  firestoreConnect([{ collection: 'users' }])\r\n)(PendingList)","import React, {Component} from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { Redirect } from 'react-router-dom'\r\nimport { Sidebar, Menu, Segment, Label, Image } from 'semantic-ui-react'\r\nimport { signOut } from '../../store/actions/authActions'\r\n\r\n\r\nclass SideNavbar extends Component {\r\n    LOGIN = 'LOGIN'\r\n    PROFILE = 'PROFILE'\r\n    DISCOVER = 'DISCOVER'\r\n    FEED = 'FEED'\r\n    REQUESTS = 'REQUESTS'\r\n    \r\n    state = {\r\n        redirect_target: null,\r\n        targets: {\r\n            FEED: '/',\r\n            LOGIN: '/login',\r\n            PROFILE: ('/profile/' + this.props.auth.uid),\r\n            DISCOVER: '/discover',\r\n            REQUESTS: '/requests'\r\n        },\r\n        visible: false,\r\n    }\r\n   \r\n    load = (target) => {\r\n        this.setState({\r\n            redirect_target: target,\r\n            visible: false\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const { profile } = this.props;\r\n        let imageTop = profile ? <Image circular centered size='mini' src={profile.imageUrl} alt=\"\"/> : null\r\n        let imageBot = profile ? <Image circular centered size='small' src={profile.imageUrl} alt=\"\"/> : null\r\n        let requests_num = profile && profile.friends_pending ? profile.friends_pending.length : 0\r\n        const requests = (requests_num > 0) ? \r\n            <Menu.Item onClick={() => {this.load(this.REQUESTS)}}>Friend Requests:\r\n                <Label color='teal'>{requests_num} </Label>\r\n            </Menu.Item> : null\r\n\r\n\r\n        const output = (\r\n            <div className='fullsize_div' id='sidebar_2'>\r\n                <Menu fixed='top' className='top_menu'>\r\n                    <Menu.Item icon='th list' onClick={() => {this.setState({visible: !this.state.visible})}}/>\r\n                    <Menu.Item header onClick={() => {this.load(this.FEED)}}>Runtime Terror</Menu.Item>\r\n                    <Menu.Item onClick={() => {this.load(this.PROFILE)}}>{imageTop}</Menu.Item>\r\n                    {requests}\r\n                </Menu>\r\n                <div id='sidebar'>\r\n                <Sidebar.Pushable as={Segment}>\r\n                    <Sidebar as={Menu} animation={'slide along'} direction={'left'} icon='labeled' inverted vertical visible={this.state.visible} onHide={()=>this.setState({visible: false})} width='thin'>\r\n                        <Menu.Item onClick={() => {this.load(this.PROFILE)}} name='Profile'><br/>{imageBot}<br/>Profile</Menu.Item>,\r\n                        <Menu.Item onClick={() => {this.load(this.DISCOVER)}} icon='map' name='Discover'/>,\r\n                        <Menu.Item onClick={() => {this.load(this.FEED)}} icon='sitemap' name='Feed'/>,\r\n                        <Menu.Item onClick={this.props.signOut} name='Sign out' icon='sign out' position='right'/>\r\n                    </Sidebar>\r\n                    <Sidebar.Pusher dimmed={this.state.visible}>\r\n                            {this.props.content}\r\n                    </Sidebar.Pusher>\r\n                </Sidebar.Pushable>\r\n                </div>\r\n            </div>\r\n        )\r\n\r\n        if (this.state.redirect_target != null) {\r\n            let to_link = this.state.targets[this.state.redirect_target]\r\n            return (<div className='fullsize_div'><Redirect to={to_link}/>{output}</div>)\r\n        }\r\n        else {            \r\n            return output\r\n        }\r\n    }\r\n\r\n    // Clear redirect_target after render\r\n    componentDidUpdate() {\r\n        if (this.state.redirect_target != null) {\r\n            this.setState({\r\n                redirect_target: null\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        auth: state.firebase.auth,\r\n        profile: state.firebase.profile\r\n    }\r\n}\r\n  \r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        signOut: () => dispatch(signOut())\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SideNavbar)","import React, { Component } from 'react'\r\n\r\nexport class NotFound extends Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h1>404: Page not found</h1>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default NotFound\r\n","import React, { Component } from 'react';\r\nimport { Redirect, Switch, Route, BrowserRouter } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport { Menu, Loader } from 'semantic-ui-react';\r\nimport Discover from './components/discover/discover'\r\nimport TokenHandler from './components/discover/tokenHandler'\r\nimport Login from './components/layout/login/login'\r\nimport Feed from './components/feed/feed'\r\nimport Profile from './components/profile/profile'\r\nimport PendingList from './components/profile/pendingList'\r\nimport SideNavbar from './components/layout/sideNavbar';\r\nimport CreatePost from './components/createPost'\r\nimport NotFound from './components/404'\r\n\r\n\r\nclass App extends Component {\r\n\r\n  state = { isLoading: true }\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    if (nextProps.auth.isLoaded && (nextProps.auth.isEmpty || nextProps.auth.uid)) {\r\n      return { isLoading: false }\r\n    }\r\n    else {\r\n      return null\r\n    }\r\n  }\r\n\r\n  render() {\r\n\r\n    const { auth } = this.props\r\n    const content = (\r\n      <Switch>\r\n        <Route exact path='/'           component={Feed} />\r\n        <Route path='/login'            component={Login} />\r\n        <Route path='/discover'         component={Discover} />\r\n        <Route path='/tokenHandler'     component={TokenHandler} />\r\n        <Route path='/profile/:id'      component={Profile} />\r\n        <Route path='/createpost'       component={CreatePost} />\r\n        <Route path='/requests'         component={PendingList} />\r\n        <Route                          component={NotFound} />\r\n      </Switch>\r\n    )\r\n\r\n    // Redirect forces user to load at Discover page if already logged in\r\n    const showLogin = (auth.isLoaded && auth.uid) ? \r\n      <SideNavbar content={content}/> : \r\n      <div><Redirect to='/'/><Menu><Menu.Item header>Runtime Terror</Menu.Item></Menu><Login/></div>\r\n\r\n    return (\r\n      this.state.isLoading ? <div className='fullsize_div'> <Loader active size='massive'>Loading</Loader> </div>:\r\n      <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n          { showLogin }\r\n      </BrowserRouter>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    auth: state.firebase.auth\r\n  }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(App);\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","\r\nconst initState = {\r\n  authError: null\r\n}\r\n\r\nconst authReducer = (state = initState, action) => {\r\n  \r\n  switch(action.type){\r\n    case 'LOGIN_ERROR':\r\n      console.log('login error')\r\n      return {\r\n        ...state,\r\n        authError: 'Login Failed!'\r\n      }\r\n\r\n    case 'LOGIN_SUCCESS':\r\n      console.log('login success')\r\n      return {\r\n        ...state,\r\n        authError: null\r\n      }\r\n\r\n    case 'SIGNOUT_SUCCESS':\r\n      console.log('signout success')\r\n      return state\r\n\r\n    case 'SIGNUP_SUCCESS':\r\n      console.log('signup success')\r\n      return {\r\n        ...state,\r\n        authError: null\r\n      }\r\n\r\n    case 'SIGNUP_ERROR':\r\n      console.log('signup error')\r\n      return {\r\n        ...state,\r\n        authError: action.err.message\r\n      }\r\n\r\n    case 'USER_IMAGE': \r\n      console.log('Updated user image', action.uId, action.imageUrl)\r\n      return state\r\n\r\n    case 'USER_IMAGE_ERROR': \r\n      console.log('Update user image error', action.err)\r\n      return state\r\n\r\n    case 'USER_UPDATE': \r\n      console.log('Updated user profile', action.uId, action.newInfo)\r\n      return state\r\n\r\n    case 'USER_UPDATE_ERROR': \r\n      console.log('Update user profile error', action.err)\r\n      return state\r\n\r\n    case 'SEND_FRIEND_REQUEST': \r\n      console.log('Sent friend request', action.profile_user_id, action.logged_in_user_id)\r\n      return state\r\n\r\n    case 'SEND_FRIEND_REQUEST_ERROR': \r\n      console.log('Send friend request error', action.err)\r\n      return state\r\n\r\n    case 'REMOVE_FRIEND': \r\n      console.log('Sent friend request', action.profile_user_id, action.logged_in_user_id)\r\n      return state\r\n\r\n    case 'REMOVE_FRIEND_ERROR': \r\n      console.log('Send friend request error', action.err)\r\n      return state\r\n\r\n    case 'ACCEPT_FRIEND': \r\n      console.log('Accepted friend request', action.friend_user_id, action.logged_in_user_id)\r\n      return state\r\n\r\n    case 'ACCEPT_FRIEND_ERROR': \r\n      console.log('Accept friend request error', action.err)\r\n      return state\r\n\r\n    case 'REJECT_FRIEND': \r\n      console.log('Rejected friend request', action.friend_user_id, action.logged_in_user_id)\r\n      return state\r\n\r\n    case 'REJECT_FRIEND_ERROR': \r\n      console.log('Reject friend request error', action.err)\r\n      return state\r\n\r\n    case 'SPOTIFY_TOKEN': \r\n      console.log('Updated user spotify token', action.uId)\r\n      return state\r\n\r\n    case 'SPOTIFY_TOKEN_ERROR': \r\n      console.log('Update user spotify token error', action.err)\r\n      return state\r\n\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\n\r\nexport default authReducer","\r\nconst initState = {\r\n  posts: [\r\n    {'song': null}\r\n  ]\r\n}\r\n  \r\nconst postReducer = (state = initState, action) => {\r\n  switch (action.type) {\r\n    case 'CREATE_POST': \r\n      console.log('Created post:', action.post);\r\n      return state;\r\n\r\n    case 'CREATE_POST_ERROR': \r\n      console.log('Create post error:', action.err);\r\n      return state;\r\n\r\n    //TODO: add functionality for deleting and editing\r\n    /*\r\n    case 'DELETE_POST': \r\n      console.log('Deleted post:', action.project);\r\n      return state;\r\n    case 'DELETE_POST_ERROR': \r\n      console.log('Delete post error:', action.err);\r\n      return state;\r\n    case 'EDIT_POST': \r\n      console.log('Edited post:', action.project);\r\n      return state;\r\n    case 'EDIT_POST_ERROR': \r\n      console.log('Edit post error:', action.err);\r\n      return state;\r\n    */\r\n    default: \r\n      return state;\r\n  }\r\n}\r\n\r\nexport default postReducer\r\n","import authReducer from './authReducer'\r\nimport postReducer from './postReducer'\r\nimport { combineReducers } from 'redux'\r\nimport { firestoreReducer } from 'redux-firestore'\r\nimport { firebaseReducer } from 'react-redux-firebase'\r\n\r\n\r\nconst rootReducer = combineReducers({\r\n  auth: authReducer,\r\n  post: postReducer,\r\n  firestore: firestoreReducer,\r\n  firebase: firebaseReducer\r\n});\r\n\r\n\r\nexport default rootReducer\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { createStore, applyMiddleware, compose } from 'redux'\r\nimport rootReducer from './store/reducers/rootReducer'\r\nimport { Provider } from 'react-redux'\r\nimport thunk from 'redux-thunk'\r\nimport { reduxFirestore, getFirestore, createFirestoreInstance } from 'redux-firestore';\r\nimport { ReactReduxFirebaseProvider, getFirebase  } from 'react-redux-firebase';\r\nimport firebase from './config/fbConfig'\r\n\r\n\r\n// Create config for rrfProps object. We need this to pass it in the ReactReduxFirebaseProvider component\r\nconst rrfConfig = {\r\n  useFirestoreForProfile: true, // Firestore for Profile instead of Realtime DB\r\n  userProfile: 'users',\r\n  attachAuthIsReady: true,\r\n};\r\n\r\nconst store = createStore(rootReducer,\r\n  compose(\r\n    applyMiddleware(thunk.withExtraArgument({ getFirebase, getFirestore })),\r\n    reduxFirestore(firebase), // Get access to firestore via getFirestore function\r\n));\r\n\r\nconst rrfProps = {\r\n  firebase,\r\n  config: rrfConfig,\r\n  dispatch: store.dispatch,\r\n  createFirestoreInstance, // Create firestore instead of craete it in fbConfig.js\r\n};\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <ReactReduxFirebaseProvider {...rrfProps}>\r\n      <App />\r\n    </ReactReduxFirebaseProvider>\r\n  </Provider>,\r\n  document.getElementById('root'),\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}